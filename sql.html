<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>方特运维--V10.0</title>
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="css/codemirror.css"/>
    <link rel="stylesheet" href="css/theme/dracula.css"/>
    <link rel="stylesheet" href="css/show-hint.css"/>
    <link rel="stylesheet" href="js/jquery-easyui/themes/default/easyui.css">
    <link href="js/jquery-easyui/themes/icon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="js/layui/css/layui.css">
    <link rel="stylesheet" href="css/index.css"/>
    <style type="text/css">
        /* 文本超长class */
        .textEllipsis {
            color: red;
            overflow: hidden;
            /*不允许滚动条*/
            white-space: nowrap;
            /*不允许文本换行*/
            text-overflow: ellipsis;
            /*文本超长显示省略号*/
        }

        /* 鼠标移上,显示全文class */
        .textEllipsis:hover {
            height: auto;
            word-break: break-all;
            white-space: pre-wrap;
            text-decoration: none;
        }

        /* 文本超长class */
        .textEllipsis_zgb {
            color: black;
            overflow: hidden;
            /*不允许滚动条*/
            white-space: nowrap;
            /*不允许文本换行*/
            text-overflow: ellipsis;
            /*文本超长显示省略号*/
        }

        /* 鼠标移上,显示全文class */
        .textEllipsis_zgb:hover {
            height: auto;
            word-break: break-all;
            white-space: pre-wrap;
            text-decoration: none;
        }

        /* 文本超长class */
        .textEllipsis_cloumndetail {
            color: palevioletred;
            overflow: hidden;
            /*不允许滚动条*/
            white-space: nowrap;
            /*不允许文本换行*/
            text-overflow: ellipsis;
            /*文本超长显示省略号*/
        }

        /* 鼠标移上,显示全文class */
        .textEllipsis_cloumndetail:hover {
            height: auto;
            word-break: break-all;
            white-space: pre-wrap;
            text-decoration: none;
        }

        /* 文本超长class */
        .textEllipsis_cloumnQRdetail {
            /*color: black;*/
            overflow: hidden;
            /*不允许滚动条*/
            white-space: nowrap;
            /*不允许文本换行*/
            text-overflow: ellipsis;
            /*文本超长显示省略号*/
        }

        /* 鼠标移上,显示全文class */
        .textEllipsis_cloumnQRdetail:hover {
            height: auto;
            word-break: break-all;
            white-space: pre-wrap;
            text-decoration: none;
        }

        /*默认*/
        .tree-icon {
            background: url('./image/sql.png') no-repeat center center !important;
        }

        /*折叠时图片*/
        .tree-folder {
            background: url('./image/sql.png') no-repeat center center !important;
        }

        /*展开时图片*/
        .tree-folder-open {
            background: url('./image/func.png') no-repeat center center !important;
        }

        /*#scrollText {*/
        /*    width: 200px;*/
        /*    margin-right: auto;*/
        /*    margin-left: auto;*/
        /*}*/
    </style>

    <!-- 百度统计-->
    <script>
        var _hmt = _hmt || [];
        var g_url_head = "http://127.0.0.1:8000";
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?3ad24903c33e3fe31645b2a58f3b6dbf";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    <script type="text/javascript">
        var baseUrl = "";
    </script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/echart/echarts.min.js"></script>
    <script type="text/javascript" src="js/jquery-easyui/jquery.easyui.min.js"></script>
    <script src="js/jquery.jdirk.js"></script>
    <script type="text/javascript" src="js/jquery-easyui/locale/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="js/editor/codemirror.js"></script>
    <script type="text/javascript" src="js/editor/sublime.js"></script>
    <script type="text/javascript" src="js/editor/sql.js"></script>
    <script type="text/javascript" src="js/editor/sql-hint.js"></script>
    <script type="text/javascript" src="js/editor/show-hint.js"></script>
    <script type="text/javascript" src="js/editor/formatting.js"></script>
    <script type="text/javascript" src="js/editor/sql-formatter.min.js"></script>
    <script type="text/javascript" src="js/layui/layui.js"></script>
    <script type="text/javascript" src="js/layui/xm-select.js"></script>
    <script type="text/javascript" src="js/tableEdit.js"></script>
    <script src="js/jeasyui.extensions.tree.getLevel.js"></script>

    <!--<script src="js/jeasyui.extensions.menu.js"></script>-->
    <!--<script src="js/jeasyui.extensions.datagrid.rowContext.js"></script>-->

    <script src="js/jeasyui.extensions.tree.getNodes.js"></script>
    <script src="js/jeasyui.extensions.tree.findNodes.js"></script>
    <!--    <script src="js/jeasyui.extensions.datagrid.updateColumn.js"></script>-->
    <script src="js/autoPinyin.js"></script>
    <script src="js/scrollAutoPlay.js"></script>

    <script type="text/javascript">
        //全局 layui 表单对象声明  用于表单编辑
        layui.config({
            base: 'js/'
        }).extend({
            tableEdit: 'tableEdit'
        }).use(['table', 'tableEdit', 'layer'], function () {
        });
    </script>

    <!-- 分组汇总 -->
    <link href="css/icon-standard.css" rel="stylesheet"/>
    <link href="css/jeasyui.extensions.datagrid.css" rel="stylesheet"/>
    <script src="js/jeasyui.extensions.menu.js"></script>
    <script src="js/jeasyui.extensions.datagrid.getDom.js"></script>
    <script src="js/jeasyui.extensions.datagrid.getColumnInfo.js"></script>
    <script src="js/jeasyui.extensions.datagrid.getRowData.js"></script>
    <script src="js/jeasyui.extensions.datagrid.tooltip.js"></script>
    <script src="js/jeasyui.extensions.datagrid.columnToggle.js"></script>
    <script src="js/jeasyui.extensions.datagrid.groupSummary.js"></script>

    <!-- 右键菜单 -->
    <script src="js/jeasyui.extensions.datagrid.rowContext.js"></script>

    <!-- 回车菜单 -->
    <script src="js/jeasyui.extensions.datagrid.navigating.js"></script>
    <!-- 全局文件上传 组件-->
    <script src="js/myjs/allFileAdministration.js"></script>

    <!-- 质量记录样式 -->
    <link href="css/jeasyui.extensions.selector.css" rel="stylesheet"/>

    <script src="js/tanshangshow.js"></script>
    <script src="js/tanshangEdit.js" type="text/javascript"></script>
    <script src="js/myjs/goodpucharseEdit.js" type="text/javascript"></script>
    <script src="js/myjs/goodpucharseShow.js" type="text/javascript"></script>
    <script src="js/myjs/parkproblemEdit.js" type="text/javascript"></script>
    <script src="js/myjs/exccelimpl.js" type="text/javascript"></script>
    <script src="js/myjs/electricTaskDetailShow.js" type="text/javascript"></script>
    <script src="js/myjs/taskProcessRecord.js" type="text/javascript"></script>
    <script src="js/myjs/searchTableMethod.js" type="text/javascript"></script>

    <!-- 文件全局搜索 -->
    <script src="js/fileSearchTableMethod.js" type="text/javascript"></script>
</head>
<body>
<div class="easyui-layout" style="width:1200px;height:1000px;padding:10px;" data-options="fit:true">
    <div data-options="region:'west',split:true" style="width:280px;padding:10px" class="card left-card">
        <div class="tree-div">
            <div id="treeaccordion" class="easyui-accordion" data-options="fit:true,border:true"
            >
                <div title="常用SQL" data-options="iconCls:'icon-myselfsql',fit:false"
                     style="overflow:auto;padding:10px;">
                    <ul id="tree1" class="easyui-tree"></ul>
                </div>
                <div title="个人应用" data-options="iconCls:'icon-application',fit:false" style="padding:10px;">
                    <ul id="tree2" class="easyui-tree"></ul>
                </div>
                <div title="视图" data-options="iconCls:'icon-viewpattern ',fit:false" style="padding:10px;">
                    <ul id="tree3" class="easyui-tree"></ul>
                </div>
                <div title="函数" data-options="iconCls:'icon-program',fit:false" style="padding:10px;">
                    <ul id="tree4" class="easyui-tree"></ul>
                </div>
            </div>
            <!--            <ul id="dstable" fit="true" border="false"></ul>-->
        </div>
    </div>
    <div data-options="region:'center'" style="padding:10px" class="card right-card">
        <div class="layui-row tools">
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id='execute'>
                <img src="image/run.png" alt="">&nbsp;执行
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id='stop' onclick="stopLoadData()">
                <img id="stopImg" src="image/stop0.png">&nbsp;停止
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id='format'>
                <img src="image/format.png">&nbsp;美化
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id='delete'>
                <img src="image/delete.png">&nbsp;清空
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id="save">
                <img src="image/save.png">&nbsp;保存
            </button>
            <a href="#" class="layui-btn layui-btn-primary  layui-btn-xs" onclick="downLoadExcelTemplate()">
                <img src="image/excel.png">&nbsp;下载
            </a>
            <button class="layui-btn layui-btn-primary  layui-btn-xs" id='logout'>
                <img src="image/logout.png">&nbsp;退出
            </button>
            <!--            <div class="layui-btn layui-btn-primary"-->
            <!--                 style="border-left: none;border-right: none;border-top: none;border-bottom: none;"-->
            <!--                 id="scrollText"></div>-->
            <button title="帮助文档" class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='showhelpb'>
                <img id="showhelpi" src="image/help.png">
            </button>
            <button title="查看SQL" class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='showsql'
                    onclick="showsql(1)">
                <img id="showsqlimage" src="image/showsql.png">
            </button>
            <button title="修改密码" class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='changeuser'
                    onclick="changeuser()">
                <img src="image/changeuser.png">
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='distrimenu'>
                <img src="image/allocation.png">菜单分配
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='distribution'>
                <img src="image/userassign.png">用户分配
            </button>
            <button class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='fileUpload'
                    onclick="openuploadfile()">
                <img src="image/fileupload.png">文件上传
            </button>
            <!--            <button class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='noticePublish'-->
            <!--                    onclick="noticePublish()">-->
            <!--                <img src="image/notice.png">-->
            <!--            </button>-->
        </div>
        <div class="layui-row sql-div">
            <textarea id="code"></textarea>
            <!-- 负责拖拽 -->
            <div id="handle" style="display: none"></div>
        </div>
        <div class="layui-row data-div">
            <div class="layui-tab h100" style="display: none" lay-filter="result">
                <ul class="layui-tab-title">
                    <li lay-id="info">信息</li>
                    <li class="layui-this" lay-id="data">结果
                        <img id="loading" style="display: none"
                             src="js/jquery-easyui/themes/default/images/loading.gif" alt="">
                    </li>
                    <li id="createViewTab" class="layui-this" lay-id="createView">
                        <font color="#a52a2a">创建视图</font>
                        <img id="loadingView" style="display: none"
                             src="js/jquery-easyui/themes/default/images/loading.gif" alt="">
                    </li>
                </ul>
                <div class="layui-tab-content h100">
                    <div class="layui-tab-item data-info h100">
                        <p id="resultCode"></p>
                        <p id="resultMsg"></p>
                        <p id="resultTime"></p>
                    </div>
                    <div class="layui-tab-item layui-show data-list h100">
                        <div data-options="region:'north',title:'查询'"
                             style="padding: 4px; background-color: #eee;">
                            <div id="tb" style="display: none;">
                                <div>
                                    &nbsp;公园名称&nbsp;<input class="easyui-textbox" id="s_park" style="width:140px;"
                                                           onkeydown="if(event.keyCode==13) searchFault()"/>
                                    &nbsp;项目名称&nbsp;<input class="easyui-textbox" id="s_project" style="width:120px;"
                                                           onkeydown="if(event.keyCode==13) searchFault()"/>
                                    &nbsp;类型&nbsp;<input class="easyui-textbox" id="s_type" style="width:100px;"
                                                         onkeydown="if(event.keyCode==13) searchFault()"/>
                                    &nbsp;日期&nbsp;<input type="text" id="s_startDate" style="width:100px;"
                                                         onkeydown="if(event.keyCode==13) searchFault()"/>--
                                    <input type="text" id="s_endDate" style="width:100px;"
                                           onkeydown="if(event.keyCode==13) searchFault()"/>
                                    <a href="javascript:searchFault()" class="easyui-linkbutton" iconCls="icon-search"
                                       plain="true">搜索</a>
                                    <a href="javascript:resetFault()" class="easyui-linkbutton" iconCls="icon-reload"
                                       plain="true">重置</a>
                                </div>
                            </div>
                            <div id="fileSea" style="display: none;">
                                <div>
                                    &nbsp;文件名&nbsp;<input class="easyui-textbox" id="f_fliename" style="width:140px;"
                                                           onkeydown="if(event.keyCode==13) searchFile()"/>
                                    &nbsp;文件格式&nbsp;<input class="easyui-textbox" id="f_filetype" style="width:120px;"
                                                           onkeydown="if(event.keyCode==13) searchFile()"/>
                                    &nbsp;管理人&nbsp;<input class="easyui-textbox" id="f_filepeople" style="width:100px;"
                                                         onkeydown="if(event.keyCode==13) searchFile()"/>
                                    <a href="javascript:searchFile()" class="easyui-linkbutton" iconCls="icon-search"
                                       plain="true">搜索</a>
                                    <a href="javascript:resetFile()" class="easyui-linkbutton" iconCls="icon-reload"
                                       plain="true">重置</a>
                                </div>
                            </div>
                            <div id="beijian" style="display: none;">
                                <div>
                                    &nbsp;项目名称&nbsp;<input class="easyui-textbox" id="xiangmumc" style="width:140px;"/>
                                    &nbsp;备件编码&nbsp;<input class="easyui-textbox" id="beijianbm" style="width:120px;"/>
                                    &nbsp;备件名称&nbsp;<input class="easyui-textbox" id="beijianmc" style="width:100px;"/>
                                    &nbsp;型号&nbsp;<input class="easyui-textbox" id="xinghao" style="width:100px;"/>
                                    <a href="javascript:searchBeiJian()" class="easyui-linkbutton" iconCls="icon-search"
                                       plain="true">搜索</a>
                                    <a href="javascript:resetBeiJian()" class="easyui-linkbutton" iconCls="icon-reload"
                                       plain="true">重置</a>
                                </div>
                            </div>
                            <div id="quanjusearch" style="display: none;">
                                <div>
                                    &nbsp;全局搜索&nbsp;<input class="easyui-textbox" id="quanjus" style="width:100px;"/>
                                    <a href="javascript:searchquanjuetd()" class="easyui-linkbutton" iconCls="icon-search"
                                       plain="true">搜索</a>
                                    <a href="javascript:resetquanju()" class="easyui-linkbutton" iconCls="icon-reload"
                                       plain="true">重置</a>
                                </div>
                            </div>
                            <div id="goodbill" style="display: none;">
                                <div>
                                    &nbsp;系统单号&nbsp;<input class="easyui-textbox" id="goosbill_name"
                                                           style="width:140px;"
                                                           onkeydown="if(event.keyCode==13) searchgoosbill()"/>
                                    &nbsp;货品编码&nbsp;<input class="easyui-textbox" id="goosbill_code"
                                                           style="width:120px;"
                                                           onkeydown="if(event.keyCode==13) searchgoosbill()"/>
                                    &nbsp;提单日期&nbsp;<input type="text" id="goodbill_startDate" class="easyui-datebox"
                                                           style="width:100px;"
                                                           onkeydown="if(event.keyCode==13) searchgoosbill()"/>--
                                    <input type="text" id="goodbill_endDate" class="easyui-datebox" style="width:100px;"
                                           onkeydown="if(event.keyCode==13) searchgoosbill()"/>
                                    <a href="javascript:searchgoosbill()" class="easyui-linkbutton"
                                       iconCls="icon-search"
                                       plain="true">搜索</a>
                                    <a href="javascript:resetgoosbill()" class="easyui-linkbutton" iconCls="icon-reload"
                                       plain="true">重置</a>
                                </div>
                            </div>
                        </div>
                        <div id="sqldatadiv" data-options="region:'center',collapsible:true,split:true"
                             style="width: 100%;height: 99%;">
                            <table id="sqldata"></table>
                        </div>
                    </div>
                    <div class="layui-tab-item createView-info h100">
                        <textarea id="viewCode" style="display: none;"></textarea>
                        <div class="layui-row tools">
                            <button title="创建视图" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    onclick="viewnameDialogOpen()">
                                <img src="image/run.png">
                            </button>&nbsp;
                            <button title="停止" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    onclick="stopViewLoadData()">
                                <img id="stopViewImg" src="image/stop0.png">
                            </button>
                            <button title="美化" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    id='formatView'>
                                <img src="image/format.png">
                            </button>
                            <button title="清空" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    id='deleteView'>
                                <img src="image/delete.png">
                            </button>
                            <button title="导出" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    onclick="viewImport()">
                                <img src="image/export.png">
                            </button>
                            <button title="导入" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    onclick="viewExport()">
                                <img src="image/import.png">
                            </button>
                            <button title="预览" class="layui-btn layui-btn-primary layui-btn-xs tabs-panels-right"
                                    onclick="viewReview()">
                                <img src="image/review.png">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="save_div" style="display: none;">
    <div class="layui-form">
        <div class="layui-form-item">
            <label class="layui-form-label">SQL名称：</label>
            <div class="layui-input-inline">
                <input type="text" name="name" placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
            <span style="color: red;position: relative;top: 15px;">*</span>
        </div>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">SQL描述：</label>
            <div class="layui-input-inline">
                <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
            </div>
        </div>
    </div>
</div>
<div id="mm" class="easyui-menu" style="width:120px;">
    <div onclick="runFunc(1)" data-options="iconCls:'icon-view'">运行</div>
    <div id="treeDelete" onclick="remove()" data-options="iconCls:'icon-remove'">删除</div>
    <div class="menu-sep"></div>
    <div id="treeSearch" onclick="chaxun1()" data-options="iconCls:'icon-search'">条件查询</div>
    <div id="treeSign" onclick="treeSet()" data-options="iconCls:'icon-lock'">设为登录首选</div>
    <div class="menu-sep"></div>
    <div id="createView" onclick="createView()" data-options="iconCls:'icon-createview'">创建视图</div>
    <div id="designView" onclick="designView()" data-options="iconCls:'icon-designview'">设计视图</div>
    <div class="menu-sep"></div>
    <div id="createAppTree" onclick="createAppTree()" data-options="iconCls:'icon-createview'">新建应用</div>
    <!--    <div id="addAppTree"  data-options="iconCls:'icon-createview'">添加应用</div>-->
    <!--    <div onclick="expand()">展开</div>-->
    <!--    <div onclick="collapse()">收缩</div>-->
</div>

<div id="win" class="easyui-dialog" title="提示" style="width: 400px; padding: 10px 20px; height: 410px;"
     closed="true" buttons="#dlg-buttons">
    <form id="fm" name="frm" method="post" style="margin-top: 20px; margin-left: 20px;">
        <div id="dlg-buttons" style="display: block">
            <a id="confirm" href="javascript:void(0)" class="easyui-linkbutton c6" onclick="submitForm(1)"
               style="width: 90px">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeWin()" style="width: 90px">取消</a>
        </div>
    </form>
</div>
<div id="chaxunwin" class="easyui-window" title="提示" style="width: 350px; padding: 10px 20px; height: 270px;"
     closed="true" buttons="#chaxundlg-buttons">
    <form id="chaxunFrom" name="frm" method="post" style="margin-top: 20px; margin-left: 20px;">
        <table>
            <tr align='center'>
                <td align='center'>字段:</td>
                <td align='center'>&nbsp;&nbsp;&nbsp;</td>
                <td align='center'>
                    <input type="text" id="zd" name="zd" style="width:200px;" class="easyui-combobox"
                           data-options="required:false"/>
                </td>
            </tr>
            <td><br/></td>
            <td><br/></td>
            <tr align='center'>
                <td align='center'>方式:</td>
                <td align='center'>&nbsp;&nbsp;&nbsp;</td>
                <td>
                    <input type="radio" name="fs" value="AND" checked>AND</input>
                    &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="fs" value="OR">OR</input>
                </td>
            </tr>
            <td><br/></td>
            <td><br/></td>
            <tr>
                <td align='center'>条件:</td>
                <td align='center'>&nbsp;&nbsp;&nbsp;</td>
                <td align='center'>
                    <select id="con" class="easyui-combobox"
                            style="width:200px;" name="con" data-options="editable:false,panelHeight:'auto'"
                            value="LIKE">
                        <option value="LIKE">LIKE</option>
                        <option value="BETWEEN AND">BETWEEN AND</option>
                        <option value="=">=</option>
                        <option value=">">></option>
                        <option value=">=">>=</option>
                        <option value="<"><</option>
                        <option value="<="><=</option>
                        <option value="<>"><></option>
                        <option value="ORDER BY ASC">ORDER BY ASC</option>
                        <option value="ORDER BY DESC">ORDER BY DESC</option>
                    </select>
                </td>
            </tr>
            <td><br/></td>
            <td><br/></td>
            <tr>
                <td align='center'>属性:</td>
                <td align='center'>&nbsp;&nbsp;&nbsp;</td>
                <td align='center' id="sxx">
                </td>
            </tr>
        </table>
        <br/>
        <div id="chaxundlg-buttons" style="display: block">
            <a id="chaxunconfirm1" href="javascript:void(0)" class="easyui-linkbutton c6" onclick="submitForm1()"
               style="width: 90px">添 加</a>
            <a id="chaxunconfirm" href="javascript:void(0)" class="easyui-linkbutton c6" onclick="submitForm2()"
               style="width: 90px">执 行</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closechaxunWin()" style="width: 90px">取
                消</a>
        </div>
    </form>
</div>
<div id="view-member-div" style="padding:1% 5%;display: none">
    用户名：
    <div class="layui-inline">
        <input class="layui-input" name="id" id="demoReload" autocomplete="off">
    </div>
    中文名：
    <div class="layui-inline">
        <input class="layui-input" name="name" id="nameReload" autocomplete="off">
    </div>
    <button class="layui-btn" id="usersearch">搜索</button>
    <button class="layui-btn" id="resetsearch">重置</button>
    <button data-method="offset" id="newUser" class="layui-btn layui-btn-normal">新建用户</button>
    <table clase="layui-hide" id="view-member-table" lay-filter="tableEvent"></table>
</div>
<div id="view-member-div1" style="padding:1% 5%;display: none">
    菜单名：
    <div class="layui-inline">
        <input class="layui-input" name="id" id="demoReload1" autocomplete="off">
    </div>
    <button class="layui-btn" id="usersearch1">搜索</button>
    <button class="layui-btn" id="resetsearch1">重置</button>
    <button data-method="offset" id="newMenu" class="layui-btn layui-btn-normal">新建菜单</button>
    <table clase="layui-hide" id="view-member-table1" lay-filter="tableEvent"></table>
</div>
<!--新建菜单-->
<div id="view-member-menu" style="margin:35px auto auto;padding:1% 5%;display: none">
    <form class="layui-form" action="" id="menuAdd">
        <div class="layui-form-item">
            <label class="layui-form-label">菜单名称:</label>
            <div class="layui-input-block">
                <input type="text" name="menuname" style="width: 200px;" lay-verify="required" lay-reqtext="菜单名是必填项！"
                       placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">菜单备注:</label>
            <div class="layui-input-block">
                <input type="text" name="menuremarks" style="width: 200px;" lay-verify="required" lay-reqtext="备注是必填项！"
                       placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">所属公园:</label>
            <div class="layui-input-block">
                <div id="menupark"></div>
                <!--                <select name="menupark" id="menupark" multiple="multiple" style="width: 200px;" lay-verify="required">-->
                <!--                    <option value=""></option>-->
                <!--                </select>-->
            </div>
        </div>
    </form>
</div>
<!--新建菜单-->

<!--新建用户-->
<div id="view-member-user" style="margin:35px auto auto;padding:1% 5%;display: none">
    <form class="layui-form" action="" id="userAdd">
        <div class="layui-form-item">
            <label class="layui-form-label">用户名:</label>
            <div class="layui-input-block">
                <input type="text" name="username" style="width: 200px;" maxlength="6" lay-verify="required"
                       placeholder="必填" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">密码:</label>
            <div class="layui-input-block">
                <input type="password" name="password" style="width: 200px;" lay-verify="required"
                       placeholder="必填" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">中文名:</label>
            <div class="layui-input-block">
                <input type="text" name="chinesename" style="width: 200px;" lay-verify="required"
                       placeholder="必填" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">所属公园:</label>
            <div class="layui-input-block">
                <div id="userpark" style="width: 200px;"></div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">所属部门:</label>
            <div class="layui-input-block">
                <div id="userdeptment" style="width: 200px;"></div>
            </div>
        </div>
    </form>
</div>
<!--新建用户-->

<!-- 密码修改 -->
<div id="view-member-tree" style="width: 300px; height: 400px;display: none">
    <div id="test12" class="demo-tree-more" style="width: 1600px; height: 1600px; overflow: scroll;"></div>
</div>
<div id="changeuser_div" style="display: none;">
    <form class="layui-form" id="change">
        <div class="layui-form-item">
            <label class="layui-form-label">旧密码：</label>
            <div class="layui-input-inline">
                <input type="password" name="oldpassword" placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
            <span style="color: red;position: relative;top: 15px;">*</span>
        </div>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">新密码：</label>
            <div class="layui-input-inline">
                <input type="password" name="newpassword" placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
            <span style="color: red;position: relative;top: 15px;">*</span>
        </div>
    </form>
</div>
<div id="changenotice_div" style="display: none;">
    <form class="layui-form" id="changenotice">
        <div class="layui-form-item">
            <label class="layui-form-label">视图名称：</label>
            <div class="layui-input-inline">
                <input type="text" name="viewname" placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">公告内容：</label>
            <div class="layui-input-inline">
                <textarea name="notice" placeholder="请输入内容" class="layui-textarea"></textarea>
            </div>
        </div>
    </form>
</div>

<!-- 全局文件上传 -->
<div id="uploadfilediv" class="easyui-window" title="文件上传" style="width: 360px;height: 180px;"
     data-options="closed:true"
     align="center">
    <form id="uploadfilefrom" name="uploadfilefrom" method="POST" enctype="multipart/form-data">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>文件备注名：</td>
                <td>
                    <input id="name" name="name" class="easyui-textbox" style="width:200px;"
                           data-options="prompt:'请输入文件名称',required:true">
                </td>
            </tr>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>选择文件：</td>
                <td>
                    <input id="uploadAllFile" class="easyui-filebox"
                           data-options="prompt:'选择文件',buttonText:'&nbsp;选&nbsp;择&nbsp;',required:true"
                           style="width: 200px;">
                    <audio id="audio"></audio>
                </td>
            </tr>
        </table>
        <br/>
        <a id="uploadSubmit" class="easyui-linkbutton" onclick="javascript:uploadAll()">上传</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:resetUploadForm()">关闭</a>
    </form>
</div>

<!-- AVC/JD文件标签 -->
<div id="fileAllocation" class="easyui-dialog" title="文件标签" style="width: 360px;height: 180px;"
     data-options="closed:true"
     align="center">
    <form id="fileAllocationfrom" method="POST">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>文件类型：</td>
                <td>
                    <input id="fileTypeAllocation" name="fileTypeAllocation" class="easyui-textbox" style="width:200px;"
                           data-options="prompt:'请输入文件类型',required:true">
                </td>
            </tr>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>文件详细类型：</td>
                <td id="fileDetailTypeAllocation" name="fileDetailTypeAllocation" class="easyui-textbox"
                    style="width:200px;"
                    data-options="prompt:'请输入文件详细类型',required:true">
                </td>
            </tr>
        </table>
        <br/>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:assignFile(1)">标签</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:resetUploadAllocationForm(1)">关闭</a>
    </form>
</div>

<!-- 总工办文件标签 -->
<div id="fileAllocationZgb" class="easyui-dialog" title="文件标签" style="width: 360px;height: 200px;"
     data-options="closed:true"
     align="center">
    <form id="fileAllocationfromZgb" method="POST">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>公园：</td>
                <td>
                    <input id="fileTypeAllocationPark" name="fileTypeAllocation" class="easyui-textbox"
                           style="width:200px;"
                           data-options="prompt:'请输入文件类型',required:true">
                </td>
            </tr>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>项目：</td>
                <td>
                    <input id="fileTypeAllocationProject" name="fileTypeAllocation" class="easyui-textbox"
                           style="width:200px;"
                           data-options="prompt:'请输入文件类型',required:true">
                </td>
            </tr>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>文件详细类型：</td>
                <td id="fileDetailTypeAllocationZgb" name="fileDetailTypeAllocation" class="easyui-textbox"
                    style="width:200px;"
                    data-options="prompt:'请输入文件详细类型',required:true">
                </td>
            </tr>
        </table>
        <br/>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:assignFile(2)">标签</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:resetUploadAllocationForm(2)">关闭</a>
    </form>
</div>

<!-- 进度条 -->
<div id="dlg4" class="easyui-dialog" style="width: 260px;height: 165px;padding: 10px 20px" closed="true"
     buttons="#dlg-buttons4">
    <div id="p" style="width:200px;"></div>
    <div><span id="dp"></span></div>
</div>

<!-- 设置个人应用 -->
<div id="app_div" style="display: none;">
    <form class="layui-form" id="app">
        <div class="layui-form-item">
            <label class="layui-form-label">应用名称：</label>
            <div class="layui-input-inline">
                <input type="appname" name="appname" placeholder="请输入" autocomplete="off" class="layui-input">
            </div>
            <span style="color: red;position: relative;top: 15px;">*</span>
        </div>
    </form>
</div>

<!-- 柱状图 -->
<div id="zzt" title="数据分析" class="easyui-dialog" style="width: 650px;height: 490px;padding: 10px 20px" closed="true">
    <div id="chart_zzt" style="width: 95%;height:90%;padding-top:20px;"></div>
</div>

<!-- 饼图 -->
<div id="bin" title="数据分析" class="easyui-dialog" style="width: 650px;height: 490px;padding: 10px 20px" closed="true">
    <div id="chart_bin" style="width: 95%;height:90%;padding-top:20px;"></div>
</div>

<!-- 柱状图/饼图明细 -->
<div id="zzt_detail" title="部分数据" class="easyui-dialog" closed="true">
    <table id="chart_zzt_detail"></table>
</div>

<!-- 联动饼图 -->
<div id="lbin" title="联动饼图数据分析" class="easyui-dialog" style="width: 650px;height: 490px;padding: 10px 20px"
     closed="true">
    <div id="chart_lbin" style="width: 95%;height:90%;padding-top:20px;"></div>
</div>

<!--        探伤 编辑begin-->
<div id="tanshangEdit">
    <div id="winrows" class="easyui-dialog" title="提示" style="width: 400px; padding: 10px 20px; height: 410px;"
         closed="true" buttons="#dlg-buttonrows">
        <div class="easyui-layout" data-options="fit:true">
            <div data-options="region:'north',border:false" style="height:185px;overflow:hidden;">
                <form id="RowsForm" method="post">
                    <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                        <tbody>
                        <h1 style="text-align:center">游乐设施业务申报表</h1>
                        <tr>
                            <td style="text-align:right;">申请时间：</td>
                            <td>
                                <input class="easyui-datebox" editable="true" id="apply_time" name="apply_time"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请人：</td>
                            <td>
                                <input class="easyui-textbox" id="apply_man" name="apply_man"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">系统单号：</td>
                            <td>
                                <input class="easyui-textbox" id="system_no" name="system_no"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right;">工号：</td>
                            <td>
                                <input class="easyui-textbox" id="job_no" name="job_no" data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">公司名称：</td>
                            <td>
                                <input class="easyui-textbox" id="corporate_name" name="corporate_name"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请部门：</td>
                            <td>
                                <input class="easyui-textbox" id="appli_department" name="appli_department"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>

                        </tr>
                        <tr>
                            <td style="text-align:right;">设备数量：</td>
                            <td>
                                <input class="easyui-textbox" id="number_equipment" name="number_equipment"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">开始日期：</td>
                            <td>
                                <input class="easyui-datebox" editable="false" id="flaw_dbegin" name="flaw_dbegin"
                                       data-options="readonly:false"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">结束日期：</td>
                            <td>
                                <input class="easyui-datebox" editable="false" id="flaw_dend" name="flaw_dend"
                                       data-options="readonly:false"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right;">探伤地点：</td>
                            <td>
                                <input class="easyui-combobox" id="flaw_place" name="flaw_place"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>
                            <td style="text-align:right;">申报类型：</td>
                            <td colspan="3">
                                <input type="checkbox" id="skill1" name="ts_sblx" value="1" /> <label for="skill1">检验
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="skill2" name="ts_sblx" value="2" /> <label for="skill2">定检探伤
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="skill3" name="ts_sblx" value="3" /> <label for="skill3">
                                检验+定检探伤</label> &nbsp;&nbsp;
                                <input type="checkbox" id="skill4" name="ts_sblx" value="4" /> <label for="skill4">临时探伤
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="skill5" name="ts_sblx" value="5" /> <label for="skill5">延寿探伤
                            </label> &nbsp;&nbsp;
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>

            <div data-options="region:'center',border:false">
                <table id="dgrows" class="easyui-datagrid" style="width:780px;height:250px"
                       data-options="
				iconCls: 'icon-edit',
				singleSelect: true,
				toolbar: '#tbrows',
				onClickRow: onClickRow,
				onBeginEdit: onBeginEdit,
			">
                    <thead>
                    <tr>
                        <th data-options="field:'system_no',width:100,editor:'text',hidden: true">系统单号</th>
                        <th data-options="field:'entry_name',width:125,
                    editor:{
                                    type:'combobox',
                                    options:{
                                    panelHeight: '150',
                                    valueField:'name',
                                    textField:'name',
                                     required:true
                                     }
                        }">项目名称
                        </th>
                        <th data-options="field:'dpart_name',width:125,editor:'text'">部件名称/编号</th>
                        <th data-options="field:'material_quality',width:125,editor:'text'">材质</th>
                        <th data-options="field:'total',width:80,align:'right',editor:{type:'numberbox',options:{precision:1}}">
                            总数
                        </th>
                        <th data-options="field:'flaw_num',width:80,align:'right',editor:{type:'numberbox',options:{precision:1}}">
                            探伤数量
                        </th>
                        <th data-options="field:'flaw_method',width:125,editor:'text'">探伤方法</th>
                        <th data-options="field:'flaw_type',width:100,   editor:{
                    type:'combobox',options:{valueField:'name',textField:'name',required:true,data:flawData }}"
                        >探伤类型
                        </th>
                        <!--                    <th data-options="field:'itemid',width:80">产品编号</th>-->
                        <!--                    <th data-options="field:'listprice',width:80,align:'right',editor:{type:'numberbox',options:{precision:1}}">市场价</th>-->
                        <!--                    <th data-options="field:'unitcost',width:80,align:'right',editor:'numberbox'">成本价</th>-->
                        <!--                    <th data-options="field:'attr1',width:250,editor:'text'">描述</th>-->
                        <!--                                            <th data-options="field:'status',width:60,align:'center',editor:{type:'checkbox',options:{on:'P',off:''}}">状态</th>-->
                    </tr>

                    </thead>
                </table>

            </div>
            <div data-options="region:'south',border:false">
                <button class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='tsfileUpload'
                        onclick="tsupload(1,20)">
                    <img src="image/fileupload.png">文件上传
                </button>

                <a style="margin-right: 20px" class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right"
                   href="http://127.0.0.1:8000/file/%E6%96%87%E6%A1%A3/%E5%85%AC%E5%9B%AD%E5%B9%B4%E6%A3%80%E6%8E%A2%E4%BC%A4%E7%94%B3%E6%8A%A5%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%A8%A1%E6%9D%BF-20200901070743319.xlsx">
                    <img src="image/excel.png">模板表下载
                </a>
            </div>
        </div>
        <div id="tbrows" style="height:auto">
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true"
               onclick="appendRows()">添加</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-remove',plain:true"
               onclick="removeRows()">删除</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-save',plain:true"
               onclick="acceptRows()">接受改变</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-undo',plain:true"
               onclick="rejectRows()">撤销改变</a>
            <!--        <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" onclick="getChangesRows()">获取改变</a>-->
        </div>

        <div id="dlg-buttonrows" style="display: block">
            <a id="confirmrows" href="javascript:void(0)" class="easyui-linkbutton c6" onclick="submitFormRows()"
               style="width: 90px">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeWinRows()" style="width: 90px">取消</a>
        </div>
    </div>
    <div id="tsuploadfilediv" title="文件上传" style="width: 620px;height: 280px;padding:1% 5%;display: none">
        <div class="layui-upload">
            <button type="button" class="layui-btn layui-btn-normal tabs-panels-left" id="tsuploadList">选择多文件</button>
            &emsp;
            <span style="position: relative;top: 5px;" id="filesizespan"></span>
            <div class="layui-upload-list">
                <table class="layui-table">
                    <thead>
                    <tr>
                        <th>文件名</th>
                        <th>大小</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody id="tsdemoList"></tbody>
                </table>
            </div>
            <button type="button" class="layui-btn tabs-panels-left" id="tsListAction">开始上传</button>
        </div>
    </div>

</div>
<!--        探伤 编辑 end-->

<!--        探伤显示begin-->
<div id="tanshangShow">
    <div id="winrowsShow" class="easyui-dialog" title="提示" style="width: 400px; padding: 10px 20px; height: 580px;"
         closed="true" buttons="#dlg-buttonrowsShow">
        <div>
            <div>
                <form id="RowsFormShow" method="post">
                    <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                        <tbody>
                        <h1 style="text-align:center">游乐设施业务审批表</h1>
                        <tr>
                            <td style="text-align:right;">申请时间：</td>
                            <td>
                                <input class="easyui-textbox" editable="false" id="apply_times" name="apply_time"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请人：</td>
                            <td>
                                <input class="easyui-textbox" id="apply_mans" name="apply_man"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                            <td style="text-align:right;">系统单号：</td>
                            <td>
                                <input class="easyui-textbox" id="system_nos" name="system_no"
                                       data-options="readonly:false,prompt:'输入完Enter键触发'"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>

                            <td style="text-align:right;">工号：</td>
                            <td>
                                <input class="easyui-textbox" id="job_nos" name="job_no" data-options="readonly:true"
                                       style="width: 165px;">
                            </td>


                            <td style="text-align:right;">公司名称：</td>
                            <td>
                                <input class="easyui-textbox" id="corporate_names" name="corporate_name"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请部门：</td>
                            <td>
                                <input class="easyui-textbox" id="appli_departments" name="appli_department"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                        </tr>
                        <tr>
                            <td style="text-align:right;">设备数量：</td>
                            <td>
                                <input class="easyui-textbox" id="number_equipments" name="number_equipment"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">开始日期：</td>
                            <td>
                                <input class="easyui-textbox" id="flaw_dbegins" name="flaw_dbegins"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                            <td style="text-align:right;">结束日期：</td>
                            <td>
                                <input class="easyui-textbox" id="flaw_dends" name="flaw_dends"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right;">地点：</td>
                            <td>
                                <input class="easyui-textbox" id="flaw_places" name="flaw_place"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>
                            <td style="text-align:right;"></td>
                            <td>
                                <a class="layui-btn layui-btn-primary  layui-btn-xs "
                                   onclick="tsshowupload(1)">
                                    <img src="image/allocation.png">文件查看
                                </a>
                            </td>
                            <td style="text-align:right;">申报类型：</td>
                            <td colspan="2">
                                <input type="checkbox" id="ts_sblx1"  disabled name="ts_sblx"
                                       value="1"
                                />
                                <label >检验
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="ts_sblx2"  disabled name="ts_sblx"
                                       value="2" />
                                <label >定检探伤
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="ts_sblx3"  disabled name="ts_sblx"
                                       value="3" /> <label>
                                检验+定检探伤</label> &nbsp;&nbsp;
                                <input type="checkbox" id="ts_sblx4" disabled name="ts_sblx"
                                       value="4" /> <label>临时探伤
                            </label> &nbsp;&nbsp;
                                <input type="checkbox" id="ts_sblx5"  disabled name="ts_sblx"
                                       value="5" /> <label>延寿探伤
                            </label> &nbsp;&nbsp;
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <div style="padding: 10px 20px; height: 180px;">
                <table id="dgrowsShow" class="easyui-datagrid" style="width:790px;height:100px">
                </table>
            </div>
            <div>
                <br/>
                <h1 style="text-align:center">申报审批</h1>
                <br/>
                <form id="tanshangApproval" method="post">
                    <table border="1" bordercolor="black" cellspacing="0" cellpadding="5"
                           style="width:100%;height:260px">
                        <tr>
                            <td rowspan="2" width="20%" style="text-align:center;font-weight:bold">公园申请</td>
                            <td rowspan="1" width="20%" height="30px" style="text-align:center;font-weight:bold">处理人
                            </td>
                            <td rowspan="1" width="20%" style="text-align:center;"><span style="color:#888"
                                                                                         id="tshender1"></span></td>
                            <td rowspan="1" width="20%" style="text-align:center;font-weight:bold"></td>
                            <td rowspan="1" width="20%" style="text-align:center;">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">状 态</td>
                            <td rowspan="1" style="text-align:center;"><span id="tsstate1" style="color:#888">待处理</span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold"></td>
                            <td rowspan="1" style="text-align:center;">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="text-align:center;font-weight:bold">总工办派单</td>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">处理人</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tshender2"></span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">备注</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-textbox" id="tsremarks2" style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">状 态</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tsstate2">待处理</span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">指定接单人</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-combobox" id="handler2" name="handler2"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="text-align:center;font-weight:bold">工厂接单</td>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">处理人</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tshender3"></span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">备注</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-textbox" id="tsremarks3" data-options="prompt:'计划入场时间'"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">状 态</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tsstate3">待处理</span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">指定探伤人</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-combobox" id="handler3"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>

                        <tr>
                            <td rowspan="2" style="text-align:center;font-weight:bold">设备探伤</td>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">处理人</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tshender4"></span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">备注</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-textbox" id="tsremarks4" data-options="prompt:'实际入场时间'"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td height="30px" style="text-align:center;font-weight:bold">状 态</td>
                            <td style="text-align:center;"><span style="color:#888" id="tsstate4">待处理</span></td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">指定报告人</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-combobox" id="handler4"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="text-align:center;font-weight:bold">报告编制</td>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">处理人</td>
                            <td rowspan="1" style="text-align:center;"><span style="color:#888" id="tshender5"></span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">备注</td>
                            <td rowspan="1" style="text-align:center;">
                                <input class="easyui-textbox" id="tsremarks5"
                                       style="width: 165px;" disabled="disabled">
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="1" height="30px" style="text-align:center;font-weight:bold">状 态</td>
                            <td rowspan="1" style="text-align:center;"><span id="tsstate5" style="color:#888">待处理</span>
                            </td>
                            <td rowspan="1" style="text-align:center;font-weight:bold">文件</td>
                            <td rowspan="1" style="text-align:center;">
                                <a class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id='tsshowfile1'
                                   onclick="tsupload(2,20)" style="display: none">
                                    <img src="image/fileupload.png">文件上传
                                </a>
                                <a class="layui-btn layui-btn-primary  layui-btn-xs " id='tsshowfile2'
                                   onclick="tsshowupload(2)">
                                    <img src="image/allocation.png">文件查看
                                </a>
                                <!--                            <input class="easyui-combobox" id="handler5"-->
                                <!--                                       style="width: 165px;"  disabled="disabled" >-->
                            </td>

                        </tr>
                    </table>
                </form>
            </div>
        </div>
        <div id="dlg-buttonrowsShow" style="display: block">
            <a id="confirmrowsShow" href="javascript:void(0)" class="easyui-linkbutton c6"
               onclick="submitFormRowsShow()"
               style="width: 90px;display:none;">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeWinRowsShow()"
               style="width: 90px">取消</a>
        </div>
    </div>
    <div id="tsshowfilediv" title="文件显示" style="width: 700px;height: 360px;padding:1% 5%;display: none">
        <table id="tsshowfiledtable"></table>
    </div>
</div>
<!--        探伤 显示 end-->

<!--       酒店物料申请 编辑begin-->
<div id="goodspurchaseEdit">
    <div id="goodspurchaseRows" class="easyui-dialog" title="提示"
         style="width: 620px; padding: 10px 20px; height: 410px;"
         closed="true" buttons="#gpbuttonCommit">
        <div class="easyui-layout" data-options="fit:true">
            <div data-options="region:'north',border:false" style="height:185px;overflow:hidden;">
                <form id="goodspurchaseForm" method="post">
                    <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                        <tbody>
                        <h1 style="text-align:center">酒店物料申报表</h1>
                        <tr>
                            <td style="text-align:right;">公司名称：</td>
                            <td>
                                <input class="easyui-combobox" id="gpcorporate_name" name="corporate_name"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请部门：</td>
                            <td>
                                <input class="easyui-textbox" id="gpappli_department" name="appli_department"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">工号：</td>
                            <td>
                                <input class="easyui-textbox" id="gpjob_no" name="job_no" data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                        </tr>
                        <tr>
                            <td style="text-align:right;">申请时间：</td>
                            <td>
                                <input class="easyui-datetimebox" editable="true" id="gpapply_date" name="apply_date"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请人：</td>
                            <td>
                                <input class="easyui-textbox" id="gpapply_man" name="apply_man"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">系统单号：</td>
                            <td>
                                <input class="easyui-textbox" id="gpsystem_no" name="system_no"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <!--                            <td style="text-align:right;">到货日期：</td>-->
                            <!--                            <td>-->
                            <!--                                <input class="easyui-datebox" editable="false" id="gparrive_date" name="arrive_date"-->
                            <!--                                       data-options="readonly:false"-->
                            <!--                                       style="width: 165px;">-->
                            <!--                            </td>-->
                            <td style="text-align:right;">地点：</td>
                            <td>
                                <input class="easyui-combobox" id="gpflaw_place" name="flaw_place"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>
                            <td style="text-align:right;">分类类别：</td>
                            <td>
                                <input class="easyui-combobox" id="gpsort_goods" name="sort_goods"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <div data-options="region:'center',border:false">
                <table id="gprows" class="easyui-datagrid" style="width:820px;height:250px"
                       data-options="singleSelect:true">
                </table>
            </div>
        </div>
        <div id="gpbuttonCommit" style="display: block">
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitgpFormRows()"
               style="width: 90px">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeGpWinRows()" style="width: 90px">取消</a>
        </div>
    </div>

</div>
<!--        酒店物料申请 编辑 end-->

<!--        酒店物料显示begin-->
<div id="goodspurchaseShow">
    <div id="gprowsShow" class="easyui-dialog" title="提示" style="width: 450px; padding: 10px 20px; height: 580px;"
         closed="true" buttons="#gpbuttonCommitS">
        <div>
            <div>
                <form id="gpRowsFormShow" method="post">
                    <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                        <tbody>
                        <h1 style="text-align:center">酒店物料视图表</h1>
                        <tr>
                            <td style="text-align:right;">公司名称：</td>
                            <td>
                                <input class="easyui-textbox" id="gpcorporate_names" name="corporate_name"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请部门：</td>
                            <td>
                                <input class="easyui-textbox" id="gpappli_departments" name="appli_department"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">工号：</td>
                            <td>
                                <input class="easyui-textbox" id="gpjob_nos" name="job_no" data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                        </tr>
                        <tr>
                            <td style="text-align:right;">申请时间：</td>
                            <td>
                                <input class="easyui-datebox" editable="true" id="gpapply_dates" name="apply_date"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">申请人：</td>
                            <td>
                                <input class="easyui-textbox" id="gpapply_mans" name="apply_man"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">系统单号：</td>
                            <td>
                                <input class="easyui-textbox" id="gpsystem_nos" name="system_no"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right;">地点：</td>
                            <td>
                                <input class="easyui-textbox" id="gpflaw_places" name="flaw_place"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>
                            <td style="text-align:right;">分类类别：</td>
                            <td>
                                <input class="easyui-textbox" id="gpsort_goodss" name="sort_goods"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>
                            <td style="text-align:right;">供应商确认：</td>
                            <td>
                                <input class="easyui-combobox" id="goods_suppliers" name="goods_supplier"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <div style="padding: 10px 20px; height: 250px;">
                <table id="gprowsTableShow" style="width:820px;height:250px" class="region:'center',easyui-datagrid">
                </table>
            </div>
            <div style="float: left;">
                &emsp;&emsp;
                <label style="text-align:right;">采购确认：</label>
                <input id="purchase_confirm" type="checkbox" disabled>
                &emsp;&emsp;
                <label style="text-align:right;">仓库确认：</label>
                <input id="warehouse_confirm" type="checkbox" disabled>
                &emsp;&emsp;
            </div>
            <div id="gparrivediv" style="float: left;">
                <label style="text-align:right;">到货日期：</label>
                <input class="easyui-datebox" editable="false" id="gparrive_dates" name="arrive_date"
                       data-options="readonly:true"
                       style="width: 165px;">
            </div>

        </div>
        <div id="gpbuttonCommitS" style="display: block">
            <a href="javascript:void(0)" class="easyui-linkbutton" id="submitGpS" onclick="submitGpShow()"
               style="width: 90px">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeGpWinShow()"
               style="width: 90px">取消</a>
        </div>
    </div>

</div>
<!--        酒店物料 显示 end-->

<!--       公园问题派单 流程 begin-->
<div id="parkproblemEdit">
    <div id="parkproblemRows" class="easyui-dialog" title="提示"
         style="width: 400px; padding: 10px 20px; height: 410px;"
         closed="true" buttons="#ppbuttonCommit">
        <div>
            <div>
                <form id="parkproblemForm" method="post">
                    <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                        <tbody>
                        <h1 style="text-align:center">公园问题申报表</h1>
                        <tr>
                            <td style="text-align:right;">申请时间：</td>
                            <td>
                                <input class="easyui-datebox" editable="true" id="ppapply_date" name="apply_date"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>
                            <td style="text-align:right;">申请人：</td>
                            <td>
                                <input class="easyui-textbox" id="ppapply_man" name="apply_man"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">系统单号：</td>
                            <td>
                                <input class="easyui-textbox" id="ppsystem_no" name="system_no"
                                       data-options="readonly:true"
                                       style="width: 165px;">
                            </td>
                        </tr>
                        <tr>

                            <td style="text-align:right;">申请部门：</td>
                            <td>
                                <input class="easyui-textbox" id="ppappli_department" name="appli_department"
                                       data-options="readonly:true" style="width: 165px;">
                            </td>

                            <td style="text-align:right;">工号：</td>
                            <td>
                                <input class="easyui-textbox" id="ppjob_no" name="job_no" data-options="readonly:true"
                                       style="width: 165px;">
                            </td>

                            <td style="text-align:right;">地点：</td>
                            <td>
                                <input class="easyui-combobox" id="pppark_place" name="park_place"
                                       data-options="readonly:false" style="width: 165px;">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right;">问题标题：</td>
                            <td>
                                <input class="easyui-textbox" id="problem_title" name="problem_title"
                                       data-options="readonly:false"
                                       style="width: 265px;">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <div>
                <table id="pprows" class="easyui-datagrid" style="width:780px;height:250px"
                       data-options="singleSelect:true">
                </table>
            </div>
            <div>
                <div>
                    <div class="layui-card">
                        <div class="layui-card-header">
                            流程公告
                            <button style="margin-top: 10px"
                                    class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right"
                                    onclick="tsupload(1,50)" id="ppupload">
                                <img src="image/fileupload.png">文件上传
                            </button>
                            <button style="margin-top: 10px"
                                    class="layui-btn layui-btn-primary  layui-btn-xs tabs-panels-right" id="ppshowfile"
                                    onclick="tsshowupload(1)">
                                <img src="image/allocation.png">文件查看
                            </button>
                        </div>
                        <div class="layui-card-body layui-text">
                            <span id="ppapproltext"></span>
                        </div>
                    </div>

                </div>
                <br/>
                <span>意见：</span>
                <input class="easyui-textbox" id="ppreamrk" style="width: 165px;" data-options="disabled:false">
                &emsp;&emsp;&emsp;&emsp;
                <span>指定审批人：</span>
                <input class="easyui-combobox" id="approved_by"
                       style="width: 165px;" data-options="disabled:false">
                &emsp;&emsp;&emsp;&emsp;
                <span>审批状态：</span>
                <input type="radio" name="ppstate" value="1" checked> 通过</input>
                <input type="radio" name="ppstate" value="2" hecked> 驳回</input>
            </div>
        </div>
        <div id="ppbuttonCommit" style="display: block">
            <a href="javascript:void(0)" class="easyui-linkbutton c6" onclick="submitppFormRows()" id="ppcommit"
               style="width: 90px">提交</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeppWinRows()" style="width: 90px">取消</a>
        </div>
    </div>
</div>
<!--        公园问题派单 流程 end-->

<!--       电气任务Exccel导入  begin-->
<div id="excelimpldq">
    <div id="excelimpldivdq" class="easyui-dialog" title="excel导入" style="width: 360px;height: 230px;"
         data-options="closed:true,modal:true" buttons="#dlg-excelimpldq"
         align="center">
        <form id="form2" method="post" enctype="multipart/form-data">
            <br><br><br><br>
            <label style="text-align:right;font-size:14px">文件导入:</label>
            <input id="contractDQFile" class="easyui-filebox"
                   data-options="prompt:'选择文件',buttonText:'&nbsp;选&nbsp;择&nbsp;',required:true"
                   style="width: 200px;height:30px">
        </form>
    </div>
    <div id="dlg-excelimpldq" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" style="width: 90px" onclick="updqExcelFile()">上传</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="resetdqExcelForm()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--        电气任务Exccel导入  end-->

<!--       公园物料价格Exccel导入  begin-->
<div id="excelimpl">
    <div id="excelimpldiv" class="easyui-dialog" title="excel导入" style="width: 360px;height: 230px;"
         data-options="closed:true,modal:true" buttons="#dlg-excelimpl"
         align="center">

        <form id="form1" method="post" enctype="multipart/form-data">
            <div class="layui-inline" style="margin-top: 30px">
                <label style="text-align:right;font-size:14px">日期范围:</label>
                <div class="layui-input-inline">
                    <input type="text" class="layui-input" style="width: 200px;height:30px" id="gpDateRange"
                           placeholder="必填">
                </div>
            </div>
            <br>
            <br>
            <label style="text-align:right;font-size:14px">文件导入:</label>
            <input id="contractFile" class="easyui-filebox"
                   data-options="prompt:'选择文件',buttonText:'&nbsp;选&nbsp;择&nbsp;',required:true"
                   style="width: 200px;height:30px">
            <!--        <div class="layui-upload" >-->
            <!--            <button type="button" class="layui-btn layui-btn-normal" id="excelimplop">选择文件</button>-->
            <!--            <button type="button" class="layui-btn" id="excelimplup">开始上传</button>-->
            <!--        </div>-->
        </form>
    </div>
    <div id="dlg-excelimpl" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" style="width: 90px" onclick="upExcelFile()">上传</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="resetExcelForm()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--        公园物料价格Exccel导入  end-->
<!--       公园物料表单提交  begin-->
<div>
    <div id="parkgoodsdiv" class="easyui-dialog" title="公园物料新增" style="width: 360px;height: 430px;"
         data-options="closed:true,modal:true" buttons="#dlg-parkgoods"
         align="center">
        <form id="parkgoodsform" method="post" enctype="multipart/form-data">
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tr>
                    <td style="text-align:right;">分类：</td>
                    <td>
                        <input class="easyui-combobox" id="pggoods_code_add" name="sort_id"
                               data-options="readonly:false,required:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">货品编码：</td>
                    <td>
                        <input class="easyui-textbox" id="goods_code_add" name="goods_code"
                               data-options="required:true,validType:'length[15,15]',prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>


                <tr>
                    <td style="text-align:right;">货品名称：</td>
                    <td>
                        <input class="easyui-textbox" id="goods_name_add" name="goods_name"
                               data-options="required:true,validType:'length[1,20]',prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">型号：</td>
                    <td>
                        <input class="easyui-textbox" id="goods_spec_add" name="goods_spec"
                               data-options="validType:'length[1,30]'"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">单位：</td>
                    <td>
                        <input class="easyui-textbox" id="goods_unit_add" name="goods_unit"
                               data-options="required:true,validType:'length[1,5]',prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>

                <tr>
                    <td style="text-align:right;">执行价：</td>
                    <td>
                        <input class="easyui-numberbox" id="price_add" name="price"
                               data-options="precision:2,groupSeparator:',',required:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">税率：</td>
                    <td>
                        <input class="easyui-numberbox" id="rate_add" name="rate"
                               data-options="min:0,max:1,precision:2,required:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">日期区间：</td>
                    <td>
                        <input type="text" class="layui-input" style="width: 200px;height:30px"
                               id="parkgoodsDateRange" name="parkgooddate"
                               placeholder="必填">
                    </td>
                </tr>
            </table>
        </form>
    </div>
    <div id="dlg-parkgoods" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" style="width: 90px" onclick="commitParkGoods()">提交</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeParkGoods()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--        公园物料表单提交  end-->
<!-- 报表详细信息 -->
<div id="report" title="详细故障信息" class="easyui-dialog" style="width: 650px;height: 400px;"
     closed="true">
    <table id="reportData"></table>
</div>

<!-- 报表详细信息图表 -->
<div id="reportChart" title="详细故障信息图表" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <div id="reportChartData" style="width: 95%;height:90%;padding-top:20px;"></div>
</div>

<!-- 报表二级更多详细信息 -->
<div id="reportDetail" title="原始故障详细信息" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <table id="reportDetailData"></table>
</div>

<!-- 投影报表详细信息 -->
<div id="reportProjector" title="投影详细故障信息" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <table id="reportProjectorData"></table>
</div>

<!-- 投影详细信息图表 -->
<!--<div id="reportProjectorChart" title="投影详细故障信息图表" class="easyui-dialog" style="width: 600px;height: 400px;"-->
<!--     closed="true">-->
<!--    <div id="reportProjectorChartData" style="width: 95%;height:90%;padding-top:20px;"></div>-->
<!--</div>-->

<!-- 投影报表二级更多详细信息 -->
<div id="reportProjectorDetail" title="投影原始故障详细信息" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <table id="reportProjectorDetailData"></table>
</div>

<!-- 属性网格 -->
<div id="dialogpg" title="更多" class="easyui-dialog" style="width: 600px;height: 400px;padding: 0px 5px 5px 0px"
     closed="true">
    <table id="tablepg" style="width:586px;height: 100%"></table>
</div>

<!-- 创建视图名称 -->
<div id="createViewnameDiv" class="easyui-window" title="创建视图保存" style="width: 360px;height: 120px;"
     data-options="closed:true"
     align="center">
    <form id="createViewnameFrom" name="createViewnameFrom">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>新建视图名：</td>
                <td>
                    <input id="viewname" name="viewname" class="easyui-textbox" style="width:200px;"
                           data-options="prompt:'请输入视图名称',required:true">
                </td>
            </tr>
        </table>
        <br/>
        <a id="createViewnameSubmit" class="easyui-linkbutton" onclick="javascript:createViewnameSubmit()">创建</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:resetcreateViewnameForm()">关闭</a>
    </form>
</div>

<!-- 导入文件 -->
<div id="viewExportDiv" class="easyui-window" title="导入文件" style="width: 360px;height: 120px;"
     data-options="closed:true"
     align="center">
    <form id="viewExportFrom" name="viewExportFrom">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>选择文件：</td>
                <td>
                    <input id="viewExportAllFile" class="easyui-filebox"
                           data-options="prompt:'选择文件',buttonText:'&nbsp;选&nbsp;择&nbsp;',required:true"
                           style="width: 200px;">
                </td>
            </tr>
        </table>
        <br/>
        <a id="viewExportSubmit" class="easyui-linkbutton" onclick="javascript:viewExportAll()">导入</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:resetviewExportForm()">关闭</a>
    </form>
</div>

<!-- 质量记录选择 -->
<div id="operQRDialog" class="easyui-dialog" closed="true">
    <div class="easyui-layout" style="width:950px;height:450px;">
        <div data-options="region:'south',split:true" style="height:50px;" class="dialog-button">
            <a id="editQR" href="javascript:editQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">修改</span>
                    <span class="l-btn-icon icon-edit">&nbsp;</span>
                </span>
            </a>
            <a id="saveQR" href="javascript:saveQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">确定</span>
                    <span class="l-btn-icon icon-ok">&nbsp;</span>
                </span>
            </a>
            <a id="cancelQR" href="javascript:cancelQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">取消</span>
                    <span class="l-btn-icon icon-cancel">&nbsp;</span>
                </span>
            </a>
        </div>
        <div data-options="region:'west',split:true,border: false" title="可筛选项" style="width:178px;">
            <div id="QRAccordion" class="easyui-accordion" style="width:100%;height:100%;">
                <div title="按检查项目选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="QRTree1" fit="true" border="false"></ul>
                </div>
                <div title="按是否填写选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="QRTree3" fit="true" border="false"></ul>
                </div>
                <div title="按序号选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="QRTree2" fit="true" border="false"></ul>
                </div>
            </div>
        </div>
        <div data-options="region:'center',split:true,bodyCls: 'grid-selector-outer-center'">
            <div class="easyui-layout" data-options="fit:true">
                <div id="qrUnCheckout" data-options="region: 'west', split: false, border: false"
                     title="待检查项(绿:未填写--红:不合格--黑:正常)" style="width:420px;">
                    <table id="QRTable"></table>
                </div>

                <div data-options="region: 'center', border: true, bodyCls: 'grid-selector-buttons'"
                     class="panel-body panel-body-noheader grid-selector-buttons layout-body"
                     style="width: 80px; height: 408px;background:#efefef; color:#c3c3c3">
                    <div style="margin-top:100px;">
                        <input type="radio" name="isok" value="合格" checked><font color="#a52a2a">合格</font></input>
                        <br/><br/><br/>
                        <input type="radio" name="isok" value="不合格"><font color="#a52a2a">不合格</font></input>
                    </div>
                </div>

                <div id="qrCheckout" data-options="region: 'east', split: false, border: false" title="已检查项"
                     style="width:255px;">
                    <input id="detail" class="easyui-textbox"
                           data-options="multiline:true,prompt:'质量记录报告--情况说明'"
                           style="height:50%;width:100%;">
                    <input id="detailHistory" class="easyui-textbox"
                           data-options="multiline:true,prompt:'质量记录报告--情况说明（暂无批注）'"
                           style="height:50%;width:100%;">
                </div>
            </div>
        </div>
    </div>
    <div id="QRTableSearch">
        内容:<input type="text" class="easyui-textbox" id="QRContent" style="width:100px"/> 
        方法:<input type="text" class="easyui-textbox" id="QRWays" style="width:100px"/> 
        <a id="standardQueryBtn" href="javascript:void(0)" class="easyui-linkbutton"
           data-options="iconCls:'icon-search'">搜索</a>
        <a class="easyui-linkbutton"
           data-options="iconCls:'icon-remove'" id="btnReset">重置</a>
    </div>
</div>

<!-- 机电质量记录选择 -->
<div id="operJDQRDialog" class="easyui-dialog" closed="true">
    <div class="easyui-layout" style="width:1100px;height:450px;">
        <div data-options="region:'south',split:true" style="height:50px;" class="dialog-button">
            <a id="editJDQR" href="javascript:editJDQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">修改</span>
                    <span class="l-btn-icon icon-edit">&nbsp;</span>
                </span>
            </a>
            <a id="saveJDQR" href="javascript:saveJDQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">确定</span>
                    <span class="l-btn-icon icon-ok">&nbsp;</span>
                </span>
            </a>
            <a id="cancelJDQR" href="javascript:cancelJDQR();" class="l-btn l-btn-small">
                <span class="l-btn-left l-btn-icon-left">
                    <span class="l-btn-text">取消</span>
                    <span class="l-btn-icon icon-cancel">&nbsp;</span>
                </span>
            </a>
        </div>
        <div data-options="region:'west',split:true,border: false" title="可筛选项" style="width:178px;">
            <div id="JDQRAccordion" class="easyui-accordion" style="width:100%;height:100%;">
                <div title="按检查项目选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="JDQRTree1" fit="true" border="false"></ul>
                </div>
                <div title="按是否填写选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="JDQRTree3" fit="true" border="false"></ul>
                </div>
                <div title="按序号选择" data-options="iconCls:'icon-search'" style="padding:10px;">
                    <ul id="JDQRTree2" fit="true" border="false"></ul>
                </div>
            </div>
        </div>
        <div data-options="region:'center',split:true,bodyCls: 'grid-selector-outer-center'">
            <div class="easyui-layout" data-options="fit:true">
                <div id="qrJDUnCheckout" data-options="region: 'west', split: false, border: false"
                     title="待检查项(绿:未填写--红:不合格--黑:正常)" style="width:420px;">
                    <table id="JDQRTable"></table>
                </div>

                <div data-options="region: 'center', border: true" title="检查内容(提供 √ 复制)"
                     style="background:#efefef; color:#c3c3c3">
                    <div>
                        <input id="detailQRJD" class="easyui-textbox"
                               data-options="multiline:true,prompt:'检查内容填写'"
                               style="height:371px;width:100%;">
                    </div>
                </div>

                <div id="qrJDCheckout" data-options="region: 'east', split: false, border: false" title="备注"
                     style="width:235px;">
                    <input id="detailJD" class="easyui-textbox"
                           data-options="multiline:true,prompt:'质量记录报告--备注说明'"
                           style="height:50%;width:100%;">
                    <input id="detailJDHistory" class="easyui-textbox"
                           data-options="multiline:true,prompt:'质量记录报告--备注说明（暂无备注）'"
                           style="height:50%;width:100%;">
                </div>
            </div>
        </div>
    </div>
    <div id="QRJDTableSearch">
        内容:<input type="text" class="easyui-textbox" id="JDQRContent" style="width:100px"/> 
        方法:<input type="text" class="easyui-textbox" id="JDQRWays" style="width:100px"/> 
        <a id="standardJDQueryBtn" href="javascript:void(0)" class="easyui-linkbutton"
           data-options="iconCls:'icon-search'">搜索</a>
        <a class="easyui-linkbutton"
           data-options="iconCls:'icon-remove'" id="btnJDReset">重置</a>
    </div>
</div>

<!-- 申请质量记录 -->
<div id="applyQRDialog" class="easyui-dialog" title="申请质量记录" style="width: 360px;height: 180px;"
     data-options="closed:true"
     align="center">
    <form id="applyQRForm" method="POST">
        <table>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>工程名称：</td>
                <td>
                    <input id="applyQRPark" class="easyui-textbox"
                           style="width:200px;"
                           data-options="prompt:'请输入工程名称',required:true">
                </td>
            </tr>
            <tr>
                <td><br/></td>
                <td><br/></td>
            </tr>
            <tr>
                <td>项目名称：</td>
                <td>
                    <input id="applyQRProject" class="easyui-textbox"
                           style="width:200px;"
                           data-options="prompt:'请输入项目名称',required:true">
                </td>
            </tr>
        </table>
        <br/>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:applyBtnOk()">申请</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="javascript:applyBtnCancel()">关闭</a>
    </form>
</div>

<!-- 质量记录详情 -->
<div id="QRDetailDiv" title="质量记录详情" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <table id="QRDetailTable"></table>
</div>

<!-- 机电质量记录详情 -->
<div id="JDQRDetailDiv" title="机电质量记录详情" class="easyui-dialog" style="width: 600px;height: 400px;"
     closed="true">
    <table id="JDQRDetailTable"></table>
</div>

<!--        电气显示begin-->
<!--<iframe src="electric.html"></iframe>-->
<div id="electricTaskDetailShow" class="easyui-dialog" title="提示" style="width: 1050px; padding: 10px 20px; height:
580px;" closed="true" cache="false" modal="true" closable="false" resizable="true"
     buttons="#electricTaskDetailbuttonCommitS">
    <div>
        <form id="electricTaskDetailFormShow" method="post">
            <div>
                <h1 style="text-align:center">电气任务明细表格</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>

            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>
                    <td style="text-align:right;">计划单号：</td>
                    <td>
                        <input class="easyui-textbox" id="eplan_odd" name="plan_odd"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">工程名称：</td>
                    <td>
                        <input class="easyui-textbox" id="eengin_name" name="engin_name"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">项目名称：</td>
                    <td>
                        <input class="easyui-textbox" id="eproj_name" name="proj_name"
                               data-options="readonly:true"
                               style="width: 165px;">
                    </td>

                    <td style="text-align:right;">系统：</td>
                    <td>
                        <input class="easyui-textbox" id="esystem" name="system" data-options="readonly:true"
                               style="width: 165px;">
                    </td>

                </tr>

                <tr>
                    <td style="text-align:right;">子项目：</td>
                    <td>
                        <input class="easyui-textbox" id="esub_project" name="sub_project"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">单位：</td>
                    <td>
                        <input class="easyui-textbox" id="eunit1" name="unit1"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">数量：</td>
                    <td>
                        <input class="easyui-textbox" id="enumber1" name="number1" data-options="readonly:true"
                               style="width: 165px;">
                    </td>

                </tr>

                <tr>
                    <td style="text-align:right;">名称：</td>
                    <td>
                        <input class="easyui-textbox" id="eelec_name" name="elec_name"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">规格型号/图号：</td>
                    <td>
                        <input class="easyui-textbox" id="especification" name="specification"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">单位：</td>
                    <td>
                        <input class="easyui-textbox" id="eunit2" name="unit2" data-options="readonly:true"
                               style="width: 165px;">
                    </td>

                    <td style="text-align:right;">数量：</td>
                    <td>
                        <input class="easyui-textbox" id="enumber2" name="number2" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>


                    <td style="text-align:right;">类型：</td>
                    <td>
                        <input class="easyui-textbox" id="etype" name="type"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">施工内容：</td>
                    <td>
                        <!--                        <span id="econstruc_text"></span>-->
                        <input class="easyui-textbox" id="econstruc_text"
                               name="construc_text"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">备注：</td>
                    <td>
                        <input class="easyui-textbox" id="eremarks" name="remarks"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">提交人：</td>
                    <td>
                        <input class="easyui-textbox" id="eaname" name="aname" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">计划人：</td>
                    <td>
                        <input class="easyui-textbox" id="ebname" name="bname" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">⁯计划开始时间：</td>
                    <td>
                        <input class="easyui-datebox" id="ezhi_s_d" name="zhi_s_d"
                               data-options="readonly:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>

                    <td style="text-align:right;">计划结束时间：</td>
                    <td>
                        <input class="easyui-datebox" id="ezhi_j_d" name="zhi_j_d"
                               data-options="readonly:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>

                </tr>
                </tbody>
            </table>
            <div>
                <h1 style="text-align:center">安装管理部</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>


                    <td style="text-align:right;">制单日期：</td>
                    <td>
                        <input class="easyui-datebox" id="eins_p_d" name="ins_p_d"
                               data-options="readonly:true"
                               style="width: 165px;">
                    </td>

                    <td style="text-align:right;">发现场日期：</td>
                    <td>
                        <input class="easyui-datebox" id="eins_s_d" name="ins_s_d"
                               data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">任务单号：</td>
                    <td>
                        <input class="easyui-textbox" id="etask_odd" name="task_odd" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">工种：</td>
                    <td>
                        <input class="easyui-textbox" id="etype_work" name="type_work"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">计划单项工时：</td>
                    <td>
                        <input class="easyui-numberbox" id="eins_p_h" name="ins_p_h"
                               data-options="readonly:true,precision:2" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">计划总工时：</td>
                    <td>
                        <input class="easyui-numberbox" id="eins_t_h" name="ins_t_h"
                               data-options="readonly:true,precision:2" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">安装管理人：</td>
                    <td>
                        <input class="easyui-textbox" id="ecname" name="cname" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                </tr>
                </tbody>
            </table>
            <div>
                <h1 style="text-align:center">电气任务明细表格</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>
                    <td style="text-align:right;">开始日期：</td>
                    <td>
                        <input class="easyui-datebox" id="eitem_s_d" name="item_s_d"
                               data-options="readonly:true,prompt:'必填'" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">完成日期：</td>
                    <td>
                        <input class="easyui-datebox" id="eitem_c_d" name="item_c_d"
                               data-options="readonly:true,prompt:'必填'" style="width: 165px;">
                    </td>

                    <td style="text-align:right;">状态：</td>
                    <td>
                        <input class="easyui-textbox" id="estate" name="state" data-options="readonly:true,prompt:'必填'"
                               style="width: 165px;">
                    </td>

                    <td style="text-align:right;">实际工时：</td>
                    <td>
                        <input class="easyui-numberbox" id="eitem_w_h" name="item_w_h"
                               data-options="readonly:true,precision:2,prompt:'必填'"
                               style="width: 165px;">
                    </td>

                </tr>
                <tr>
                    <td style="text-align:right;">说明：</td>
                    <td>
                        <input class="easyui-textbox" id="eexplain" name="explain"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px">
                    </td>
                    <td style="text-align:right;">项目人：</td>
                    <td>
                        <input class="easyui-textbox" id="edname" name="dname" data-options="readonly:true"
                               style="width: 165px;">
                    </td>
                </tr>
                </tbody>
            </table>
            <div>
                <h1 style="text-align:center">审核</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>

                    <td style="text-align:right;">审批：</td>
                    <td>
                        <select class="easyui-combobox" id="eeappro" name="eappro"
                                data-options="readonly:true" style="width: 165px;">
                            <option>通过</option>
                            <option>驳回</option>
                        </select>
                    </td>

                    <td style="text-align:right;">备注：</td>
                    <td>
                        <input class="easyui-textbox" id="eeremarks" name="eremarks"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px">
                    </td>

                    <td style="text-align:right;">审核人：</td>
                    <td>
                        <input class="easyui-textbox" id="eename" name="ename"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
        <div class="layui-card">
            <div class="layui-card-header">
                流程公告
            </div>
            <div class="layui-card-body layui-text">
                <span id="etdapproltext"></span>
            </div>
        </div>
    </div>
    <div id="electricTaskDetailbuttonCommitS" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" id="submitelectricTaskDetail"
           onclick="submitElectricTaskDetail()"
           style="width: 90px">提交</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeElectricTaskDetail()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--        酒店物料 显示 end-->

<!--        ownfunc_avc_作业发单 begin-->
<div id="taskProcessShow" class="easyui-dialog" title="提示" style="width: 650px; padding: 10px 20px; height:
360px;" closed="true" cache="false" modal="true" closable="false" resizable="true"
     buttons="#taskProcessCommitS">
    <div>
        <form id="taskProcessFormShow" method="post">
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>
                    <td style="text-align:right;">作业人员：</td>
                    <td>
                        <div id="zoperators_name" style="width: 165px;"></div>
                    </td>
                    <td style="text-align:right;">工程：</td>
                    <td>
                        <input class="easyui-combobox" id="zengineering_name" name="engineering_name"
                               style="width: 165px;">
                    </td>
                </tr>

                <tr>
                    <td style="text-align:right;">项目：</td>
                    <td>
                        <input class="easyui-combobox" id="zattraction_name" name="attraction_name"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">子项目：</td>
                    <td>
                        <input class="easyui-combobox" id="zsub_attraction_name" name="sub_attraction_name"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">任务类型：</td>
                    <td>
                        <input class="easyui-combobox" id="ztask_type" name="task_type"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">实际工时：</td>
                    <td>
                        <input class="easyui-combobox" id="zjob_content" name="job_content"
                               style="width: 165px;">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">任务开始时间：</td>
                    <td>
                        <input class="easyui-datebox" id="zstart_date" name="start_date"
                               style="width: 165px;">
                    </td>
                    <td style="text-align:right;">任务完成时间：</td>
                    <td>
                        <input class="easyui-datebox" id="zplan_end_date" name="plan_end_date"
                               style="width: 165px;">
                    </td>
                </tr>

                <tr>
                    <td style="text-align:right;">审核人：</td>
                    <td>
                        <input class="easyui-textbox" id="zlssued_by" name="lssued_by"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">备注：</td>
                    <td>
                        <input class="easyui-textbox" id="zfollowqf" name="followqf"
                               data-options="multiline:true" style="height:50px;width:165px">
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div id="taskProcessCommitS" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" id="taskProcessDetail"
           onclick="submitTaskProcessCommitS()"
           style="width: 90px">提交</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeTaskRecord()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--       avc 作业进程管理 end-->

<!--        avc 作业进程管理 begin-->
<div id="taskProcessRecordShow" class="easyui-dialog" title="提示" style="width: 850px; padding: 10px 20px; height:
460px;" closed="true" cache="false" modal="true" closable="false" resizable="true"
     buttons="#taskProcessRecordCommitS">
    <div>
        <form id="taskProcessRecordFormShow" method="post">
            <div>
                <h1 style="text-align:center">作业人填写</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>

            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;">
                <tbody>
                <tr>
                    <td style="text-align:right;">记录序号：</td>
                    <td>
                        <input class="easyui-textbox" id="srecord_id" name="record_id"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">作业人员：</td>
                    <td>
                        <input class="easyui-textbox" id="soperators_name" name="operators_name"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                </tr>
                <tr>
                    <td style="text-align:right;">作业内容：</td>
                    <td>
                        <input class="easyui-textbox" id="sjob_content" name="job_content"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">计划开始时间：</td>
                    <td>
                        <input class="easyui-textbox" id="sstart_date" name="start_date"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                </tr>
                <tr>
                    <td style="text-align:right;">计划开始时间：</td>
                    <td>
                        <input class="easyui-textbox" id="splan_end_date" name="plan_end_date"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">备注：</td>
                    <td>
                        <input class="easyui-textbox" id="sfollow_questions" name="follow_questions"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">作业完成情况：</td>
                    <td>
                        <input class="easyui-textbox" id="stask_situation" name="task_situation"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px">
                    </td>
                </tr>
                </tbody>
            </table>
            <div>
                <h1 style="text-align:center">审核人审批</h1>
            </div>
            <HR style="FILTER: alpha(opacity=100,finishopacity=0,style=2)" width="100%" color=#987cb9 SIZE=10>
            <table style="width:100%;padding:10px;border-collapse:separate; border-spacing:0px 10px;" id="reviewertpr">
                <tbody>

                <tr>
                    <td style="text-align:right;">审核人：</td>
                    <td>
                        <input class="easyui-textbox" id="slssued_by" name="lssued_by"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">确认完成时间：</td>
                    <td>
                        <input class="easyui-datebox" id="send_date" name="end_date"
                               data-options="readonly:true" style="width: 165px;">
                    </td>

                </tr>
                <tr>
                    <td style="text-align:right;">评分：</td>
                    <td>
                        <input class="easyui-combobox" id="sfeedback_source" name="feedback_source"
                               data-options="readonly:true" style="width: 165px;">
                    </td>
                    <td style="text-align:right;">审核人备注：</td>
                    <td>
                        <input class="easyui-textbox" id="send_remark" name="end_remark"
                               data-options="readonly:true,multiline:true" style="height:50px;width:165px">
                    </td>
                </tr>

                </tbody>
            </table>
        </form>
    </div>
    <div id="taskProcessRecordCommitS" style="display: block">
        <a href="javascript:void(0)" class="easyui-linkbutton" id="taskProcessRecordDetail"
           onclick="submitTaskProcessRecordCommitS()"
           style="width: 90px">提交</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="closeTaskProcessRecord()"
           style="width: 90px">取消</a>
    </div>
</div>
<!--       avc 作业进程管理 end-->


</body>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    var chosed;
    var sqlName;//执行的表名
    var sqlStr;
    var flawPlaceSelect;//探伤地点 选择中的值
    var entryData;//探伤地点
    var selfSql;//个人sql
    var count = 0;
    var input = 'temp = function(){';
    //通知通告
    var msg; //独立版的layer无需执行这一句
    //tree的父节点与祖父节点
    var g_node;
    var g_tree;//选择的树状节点
    var g_nodeParent;
    var g_nodeGrandParent;
    $.ajax({
        type: "GET",
        url: 'http://127.0.0.1:8000/configureAjax',//读取函数
        data: {id: 28, foreign: "all"},
        dataType: "json",
        async: false,
        success: function (r) {
            msg = r[0].notice;
        }
    });
    var viewname_index;
    var sql_index;
    window.onload = function () {
        $.ajax({
            type: "GET",
            url: 'http://127.0.0.1:8000/configureAjax',//读取函数
            data: {id: 37, foreign: username},
            dataType: "json",
            async: false,
            success: function (r) {
                if (r.length > 0) {
                    if (typeof r[0].viewname != "undefined" || r[0].viewname != null) {
                        viewname_index = r[0].viewname;
                        sql_index = r[0].sql;
                        if (sql_index == '1' || sql_index == '' || sql_index == null || typeof sql_index == "undefined") {
                            editor.setValue("SELECT * FROM " + viewname_index);
                            $("#execute").click();
                            $("#sqldata").datagrid({title: '登录首选项-' + viewname_index});
                        } else {
                            editor.setValue(sql_index.replace(/彑/g, "'"));
                            $("#execute").click();
                            $("#sqldata").datagrid({title: '登录首选项-' + viewname_index});
                        }
                    }
                } else {
                    console.log("暂无登录首选项！");
                }
            }
        });
    }

    //显示所有公告
    // ScrollText($('#scrollText'), 23, 200, msg, 'left', 1, 20);//滚动字幕
    $(function () {
        $("#treeaccordion").accordion("getPanel", 0).panel("setTitle", "常用SQL-" + g_usernamec)

        //异步加载子节点，即二级菜单
        $('#treeaccordion').accordion({
            onSelect: function (title, index) {
                var itemEl = $('#addAppTree')[0];
                if (itemEl != null) {
                    $('#mm').menu('removeItem', itemEl);
                }
                g_nodeParent = title;
                if (index == 0) {
                    $("#tree1").tree({
                        url: 'http://127.0.0.1:8000/treeCommonlySql?username=' + username,
                        animate: true,
                        lines: true,//显示虚线效果  
                        onDblClick: function (node) {// 在用户点击一个子节点即二级菜单时触发addTab()方法,用于添加tabs
                            g_node = node;
                            sqlName = node.text;
                            selfSql = node.sql;
                            runFunc(1);
                        },
                        onContextMenu: function (e, node) {
                            g_tree = "#tree1";
                            $("#treeDelete").show();
                            $("#treeSearch").show();
                            $("#treeSign").show();
                            $("#createAppTree").hide();
                            e.preventDefault();
                            chosed = $(this).tree('getChildren', node.target);
                            var level = $(this).tree("getLevel", node.target);
                            g_node = node;
                            // g_nodeParent = $(this).tree("getParent", node.target);
                            // g_nodeGrandParent = $(this).tree("getParent", g_nodeParent.target);
                            sqlName = node.text;
                            selfSql = node.sql;
                            // var nodeParent = $(this).tree("getParent", node.target);
                            $('#mm').menu('show', {
                                left: e.pageX,
                                top: e.pageY
                            });
                            return true;
                        }
                    });
                } else if (index == 1) {
                    var itemEl = $('#addAppTree')[0];
                    if (itemEl != null) {
                        $('#mm').menu('removeItem', itemEl);
                    }
                    $("#tree2").tree({
                        url: 'http://127.0.0.1:8000/treePersonalApplicationl?username=' + username,
                        animate: true,
                        lines: true,//显示虚线效果  
                        onDblClick: function (node) {// 在用户点击一个子节点即二级菜单时触发addTab()方法,用于添加tabs
                            sqlName = node.text;
                            selfSql = node.sql;
                            runFunc(1);
                        },
                        onContextMenu: function (e, node) {
                            g_tree = "#tree2";
                            $("#treeDelete").show();
                            $("#treeSearch").show();
                            $("#createAppTree").show();
                            $("#treeSign").show();
                            e.preventDefault();
                            chosed = $(this).tree('getChildren', node.target);
                            var level = $(this).tree("getLevel", node.target);
                            g_node = node;
                            // g_nodeParent = $(this).tree("getParent", node.target);
                            // g_nodeGrandParent = $(this).tree("getParent", g_nodeParent.target);
                            sqlName = node.text;
                            selfSql = node.sql;
                            // var nodeParent = $(this).tree("getParent", node.target);
                            $('#mm').menu('show', {
                                left: e.pageX,
                                top: e.pageY
                            });
                            return true;
                        }
                    });
                } else if (index == 2) {
                    resetaddAppTree();
                    $("#tree3").tree({
                        url: 'http://127.0.0.1:8000/treeMyView?username=' + username,
                        animate: true,
                        lines: true,//显示虚线效果  
                        onDblClick: function (node) {// 在用户点击一个子节点即二级菜单时触发addTab()方法,用于添加tabs
                            sqlName = node.text;
                            selfSql = node.sql;
                            runFunc(1);
                        },
                        onContextMenu: function (e, node) {
                            g_tree = "#tree3";
                            $("#treeDelete").hide();
                            $("#createAppTree").hide();
                            $("#treeSearch").show();
                            $("#treeSign").show();
                            e.preventDefault();
                            chosed = $(this).tree('getChildren', node.target);
                            var level = $(this).tree("getLevel", node.target);
                            g_node = node;
                            // g_nodeParent = $(this).tree("getParent", node.target);
                            // g_nodeGrandParent = $(this).tree("getParent", g_nodeParent.target);
                            sqlName = node.text;
                            selfSql = node.sql;
                            // var nodeParent = $(this).tree("getParent", node.target);
                            $('#mm').menu('show', {
                                left: e.pageX,
                                top: e.pageY
                            });
                            return true;
                        }
                    });
                } else if (index == 3) {
                    resetaddAppTree();
                    $("#tree4").tree({
                        url: 'http://127.0.0.1:8000/treeMyFunction?username=' + username,
                        animate: true,
                        lines: true,//显示虚线效果  
                        onDblClick: function (node) {// 在用户点击一个子节点即二级菜单时触发addTab()方法,用于添加tabs
                            sqlName = node.text;
                            selfSql = node.sql;
                            runFunc(1);
                        },
                        onContextMenu: function (e, node) {
                            g_tree = "#tree4";
                            $("#treeDelete").hide();
                            $("#treeSearch").hide();
                            $("#treeSign").hide();
                            $("#createAppTree").hide();
                            e.preventDefault();
                            chosed = $(this).tree('getChildren', node.target);
                            var level = $(this).tree("getLevel", node.target);
                            g_node = node;
                            // g_nodeParent = $(this).tree("getParent", node.target);
                            // g_nodeGrandParent = $(this).tree("getParent", g_nodeParent.target);
                            sqlName = node.text;
                            selfSql = node.sql;
                            // var nodeParent = $(this).tree("getParent", node.target);
                            $('#mm').menu('show', {
                                left: e.pageX,
                                top: e.pageY
                            });
                            return true;
                        }
                    });
                }
            }
        });
        $("#treeaccordion").accordion({
            selected: 1
        });

        if (username != "superadmin") {
            $("#distribution").hide();
            $("#distrimenu").hide();
            // $("#noticePublish").hide();
            $("#designView").hide();
            $("#createView").hide();
            $("#createViewTab").hide();
            $("#editQR").hide();
        }

        if (username == '030001') {
            $("#designView").show();
            $("#createView").show();
            $("#createViewTab").show();
        }

        if (username.length > 6) {//账号长度大于6为公园账号
            $("#distribution").show();
        }

        if (deptname != '1' && deptname != '2' && deptname != '3') {
            $("#fileUpload").hide();
        }

        $('#p').progressbar({
            text: '{value}%'
        });
        $("#dp").text("文件上传服务启动中，请不要重复操作!");

    })

    function runFunc(type, row) {//type 1是正常启动  2是通过菜单函数启动
        if ((type == 1) && (selfSql !== null && selfSql !== undefined && selfSql !== '')) {
            selfSql = selfSql.replace(/彑/g, "'");
            editor.setValue(selfSql);
            $('#execute').click();
        } else {
            // $("#confirmrowsShow").hide()//表示display:none;
            //判断为函数
            if (sqlName.indexOf("multiline_游乐设施业务审批表") != -1) {
                openWinShowBefore(row);
            } else if (sqlName.indexOf("multiline_游乐设施业务申报表") != -1) {
                openWinRowsBefore()
            } else if (sqlName.indexOf("multiline_酒店物料申报表") != -1) {
                openGoodsPurcharseBefore()
            } else if (sqlName.indexOf("multiline_酒店物料视图表") != -1) {
                openGoodsPurcharseSBefore(row)
            } else if (sqlName.indexOf("multiline_电气任务表格") != -1) {
                openElectricTaskDetail(row)
            } else if (sqlName.indexOf("ownfunc_电气任务Excel导入") != -1) {
                openDQExcelimplBefore(2, "电气任务Excel导入")
            } else if (sqlName.indexOf("multiline_物料价格Excel导入") != -1) {
                openExcelimplBefore(1, "物料价格Excel导入")
            } else if (sqlName.indexOf("multiline_公园物料新增") != -1) {
                openparkgoodsform();
            } else if (sqlName.indexOf("ownfunc_avc_作业进程记录") != -1) {
                openTaskProcessRecord(row)
            } else if (sqlName.indexOf("ownfunc_avc_作业派单") != -1) {
                openTaskProcess()
            } else if (sqlName.indexOf("multiline_公园问题反馈") != -1) {
                $("#ppcommit").hide();
                openParkProblemEditBefore(row)
            } else if (sqlName.indexOf("ownfunc_") != -1 || sqlName.indexOf("function_") != -1) {
                if (sqlName.indexOf("ownfunc_物料入库") != -1 || sqlName.indexOf("ownfunc_物料出库") != -1){
                    var goodCode = row.备件编码;
                    var goodName = row.备件名称;
                    var goodType = row.型号;
                    if (typeof row.乐园项目 != 'undefined'){
                        var leyuan = row.乐园项目;
                    }
                }
                $.ajax({
                    type: "post",
                    url: g_url_head + '/configureAll',
                    dataType: 'json',
                    data: {sqlname: sqlName, type: "2"},
                    async: false,
                    success: function (r) {
                        if (r.success == 1) {
                            chosed = r.column;
                        } else {
                            layer.confirm('运行失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('条件查询失败！');
                        } else {
                            layer.alert('网络连接中断！')
                        }
                    }
                });
                var chosedStrs = chosed[0].substring(1, chosed[0].length - 1).split(","); //字符分割
                chosed = chosedStrs;
                // if (chosed.length == 0 || "undefined" == typeof chosed.length) { //我的应用下的函数
                //     var nodes = $("#dstable").tree("findNodes", function (node) {
                //         return $.string.contains(node.text, sqlName);
                //     });
                //     var node = nodes[nodes.length - 1];
                //     // chosed = $(this).tree('getChildren',node.target);
                //     chosed = node.children;
                // }
                var select1;
                var selectf1;
                var senselect1;
                var senselectf1;
                var layer = layui.layer;
                for (let key in chosedStrs) {
                    var text = chosedStrs[key];
                    var index = text.lastIndexOf("-")
                    var str1 = text.substring(0, index);
                    var str2 = text.substring(index + 1, text.length);
                    if (str2.substring(0, 2) == '01') {//文本
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").textbox({});';
                        if (sqlName == "ownfunc_avc_安装计划完成记录") {
                            if (str1 == '序号') {
                                input = input + '$("' + name + '").textbox({ prompt: \'输入完Enter键触发\'});\n';
                                if (row) {
                                    var value = row.序号;
                                    input = input + '$("' + name + '").textbox("setValue","' + value + '");\n';
                                }
                                input = input + "var searchVal =  $('" + name + "').val();\n";
                                input = input + "if(searchVal!=''){" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=13&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#公园名称').textbox('setValue','');\n" +
                                    "                                          $('#项目名称').textbox('setValue','');\n" +
                                    "                                          $('#系统名称').textbox('setValue','');\n" +
                                    "                                          $('#任务分解').textbox('setValue','');\n" +
                                    "                                          $('#实际开始时间').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#公园名称').textbox('setValue',r[0].park_name);\n" +
                                    "                                          $('#项目名称').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#系统名称').textbox('setValue',r[0].system_name);\n" +
                                    "                                          $('#任务分解').textbox('setValue',r[0].task_name);\n" +
                                    "                                          $('#实际开始时间').textbox('setValue',r[0].actual_start_date);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "}\n";

                                input += " $('" + name + "').textbox('textbox').keydown(function (e) {\n" +
                                    "                                     if (e.keyCode == 13) {\n" +
                                    "  searchVal =  $('" + name + "').val();\n " +
                                    "$.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=13&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        async: false,\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#公园名称').textbox('setValue','');\n" +
                                    "                                          $('#项目名称').textbox('setValue','');\n" +
                                    "                                          $('#系统名称').textbox('setValue','');\n" +
                                    "                                          $('#任务分解').textbox('setValue','');\n" +
                                    "                                          $('#实际开始时间').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#公园名称').textbox('setValue',r[0].park_name);\n" +
                                    "                                          $('#项目名称').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#系统名称').textbox('setValue',r[0].system_name);\n" +
                                    "                                          $('#任务分解').textbox('setValue',r[0].task_name);\n" +
                                    "                                          $('#实际开始时间').textbox('setValue',r[0].actual_start_date);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                     }\n" +
                                    "                                 });";


                            }
                        } else if (sqlName == "ownfunc_avc_安装计划时间更新") {
                            if (str1 == '序号') {
                                input = input + '$("' + name + '").textbox({ prompt: \'输入完Enter键触发\'});\n';
                                if (row) {
                                    var value = row.序号;
                                    input = input + '$("' + name + '").textbox("setValue","' + value + '");\n';
                                }
                                input = input + "var searchVal =  $('" + name + "').val();\n";
                                input = input + "if(searchVal!=''){" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=13&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#公园名称').textbox('setValue','');\n" +
                                    "                                          $('#项目名称').textbox('setValue','');\n" +
                                    "                                          $('#系统名称').textbox('setValue','');\n" +
                                    "                                          $('#任务分解').textbox('setValue','');\n" +
                                    "                                          $('#总工办时间节点').textbox('setValue','');\n" +
                                    "                                          $('#计划开始时间').textbox('setValue','');\n" +
                                    "                                          $('#计划完成时间').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                         $('#公园名称').textbox('setValue',r[0].park_name);\n" +
                                    "                                          $('#项目名称').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#系统名称').textbox('setValue',r[0].system_name);\n" +
                                    "                                          $('#任务分解').textbox('setValue',r[0].task_name);\n" +
                                    "                                          $('#总工办时间节点').textbox('setValue',r[0].zgb_plan_date);\n" +
                                    "                                          $('#计划开始时间').textbox('setValue',r[0].plan_start_date);\n" +
                                    "                                          $('#计划完成时间').textbox('setValue',r[0].plan_end_date);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "}\n";

                                input += " $('" + name + "').textbox('textbox').keydown(function (e) {\n" +
                                    "                                     if (e.keyCode == 13) {\n" +
                                    "  searchVal =  $('" + name + "').val();\n " +
                                    "$.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=13&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        async: false,\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#公园名称').textbox('setValue','');\n" +
                                    "                                          $('#项目名称').textbox('setValue','');\n" +
                                    "                                          $('#系统名称').textbox('setValue','');\n" +
                                    "                                          $('#任务分解').textbox('setValue','');\n" +
                                    "                                          $('#总工办时间节点').textbox('setValue','');\n" +
                                    "                                          $('#计划开始时间').textbox('setValue','');\n" +
                                    "                                          $('#计划完成时间').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#公园名称').textbox('setValue',r[0].park_name);\n" +
                                    "                                          $('#项目名称').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#系统名称').textbox('setValue',r[0].system_name);\n" +
                                    "                                          $('#任务分解').textbox('setValue',r[0].task_name);\n" +
                                    "                                          $('#总工办时间节点').textbox('setValue',r[0].zgb_plan_date);\n" +
                                    "                                          $('#计划开始时间').textbox('setValue',r[0].plan_start_date);\n" +
                                    "                                          $('#计划完成时间').textbox('setValue',r[0].plan_end_date);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                     }\n" +
                                    "                                 });";


                            }
                        } else if (sqlName == "ownfunc_删除入库记录") {
                            if (str1 == '入库清单序号') {
                                input = input + '$("' + name + '").textbox({ prompt: \'输入完Enter键触发\'});';
                                input += " $('" + name + "').textbox('textbox').keydown(function (e) {\n" +
                                    "                                     if (e.keyCode == 13) {\n" +
                                    "                                         var searchVal =  $('" + name + "').val();\n" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=16&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        async: false,\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#乐园名称').textbox('setValue','');\n" +
                                    "                                          $('#入库项目').textbox('setValue','');\n" +
                                    "                                          $('#物料名称').textbox('setValue','');\n" +
                                    "                                          $('#物料编码').textbox('setValue','');\n" +
                                    "                                          $('#数量').textbox('setValue','');\n" +
                                    "                                          $('#日期').textbox('setValue','');\n" +
                                    "                                          $('#经办人').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#乐园名称').textbox('setValue',r[0].warehouse);\n" +
                                    "                                          $('#入库项目').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#物料名称').textbox('setValue',r[0].material_name);\n" +
                                    "                                          $('#物料编码').textbox('setValue',r[0].material_code);\n" +
                                    "                                          $('#数量').textbox('setValue',r[0].checkin_amount);\n" +
                                    "                                          $('#日期').textbox('setValue',r[0].receipt_date);\n" +
                                    "                                          $('#经办人').textbox('setValue',r[0].agent);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                     }\n" +
                                    "                                 });";
                            }
                        } else if (sqlName == "ownfunc_删除出库记录") {
                            if (str1 == '出库清单序号') {
                                input = input + '$("' + name + '").textbox({ prompt: \'输入完Enter键触发\'});';
                                input += " $('" + name + "').textbox('textbox').keydown(function (e) {\n" +
                                    "                                     if (e.keyCode == 13) {\n" +
                                    "                                         var searchVal =  $('" + name + "').val();\n" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=17&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        async: false,\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#乐园名称').textbox('setValue','');\n" +
                                    "                                          $('#入库项目').textbox('setValue','');\n" +
                                    "                                          $('#物料名称').textbox('setValue','');\n" +
                                    "                                          $('#物料编码').textbox('setValue','');\n" +
                                    "                                          $('#出库项目').textbox('setValue','');\n" +
                                    "                                          $('#数量').textbox('setValue','');\n" +
                                    "                                          $('#日期').textbox('setValue','');\n" +
                                    "                                          $('#经办人').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#乐园名称').textbox('setValue',r[0].warehouse);\n" +
                                    "                                          $('#入库项目').textbox('setValue',r[0].attraction_name);\n" +
                                    "                                          $('#物料名称').textbox('setValue',r[0].material_name);\n" +
                                    "                                          $('#物料编码').textbox('setValue',r[0].material_code);\n" +
                                    "                                          $('#出库项目').textbox('setValue',r[0].use_items);\n" +
                                    "                                          $('#数量').textbox('setValue',r[0].checkout_amount);\n" +
                                    "                                          $('#日期').textbox('setValue',r[0].stock_out_date);\n" +
                                    "                                          $('#经办人').textbox('setValue',r[0].agent);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                     }\n" +
                                    "                                 });";
                            }
                        } else if (sqlName == "ownfunc_avc_应急物料归还") {
                            if (str1 == '借用记录') {
                                input = input + '$("' + name + '").textbox({ prompt: \'输入完Enter键触发\'});';
                                if (row) {
                                    var value = row.借用单号;
                                    input = input + '$("' + name + '").textbox("setValue","' + value + '");\n';
                                }
                                input = input + "var searchVal =  $('" + name + "').val();\n";
                                input = input + "if(searchVal!=''){" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=42&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#设备名称').textbox('setValue','');\n" +
                                    "                                          $('#规格').textbox('setValue','');\n" +
                                    "                                          $('#单位').textbox('setValue','');\n" +
                                    "                                          $('#数量').textbox('setValue','');\n" +
                                    "                                          $('#借用原因').textbox('setValue','');\n" +
                                    "                                          $('#借用人').textbox('setValue','');\n" +
                                    "                                          $('#借用日期').textbox('setValue','');\n" +
                                    "                                          $('#归还日期').textbox('setValue','');\n" +
                                    "                                          $('#归还数量').textbox('setValue','');\n" +
                                    "                                          $('#归还人').textbox('setValue','');\n" +
                                    "                                          $('#备注').textbox('setValue','');\n" +
                                    "                                          $('#借用地点').textbox('setValue','');\n" +
                                    "                                          $('#归还地点').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#设备名称').textbox('setValue',r[0].equipment_name);\n" +
                                    "                                          $('#规格').textbox('setValue',r[0].equipment_norms);\n" +
                                    "                                          $('#单位').textbox('setValue',r[0].unit);\n" +
                                    "                                          $('#数量').textbox('setValue',r[0].equipment_number);\n" +
                                    "                                          $('#借用原因').textbox('setValue',r[0].borrowing_reason);\n" +
                                    "                                          $('#借用人').textbox('setValue',r[0].borrowing_user);\n" +
                                    "                                          $('#借用日期').textbox('setValue',r[0].borrowing_date);\n" +
                                    "                                          $('#归还日期').textbox('setValue',r[0].return_date);\n" +
                                    "                                          $('#归还数量').textbox('setValue',r[0].return_number);\n" +
                                    "                                          $('#归还人').textbox('setValue',r[0].return_user);\n" +
                                    "                                          $('#备注').textbox('setValue',r[0].remark);\n" +
                                    "                                          $('#借用地点').textbox('setValue',r[0].borrowing_park_in);\n" +
                                    "                                          $('#归还地点').textbox('setValue',r[0].borrowing_park_out);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                    };";
                                input += " $('" + name + "').textbox('textbox').keydown(function (e) {\n" +
                                    "                                     if (e.keyCode == 13) {  \n" +
                                    "                                          searchVal =  $('" + name + "').val();\n" +
                                    "        $.ajax({\n" +
                                    "        url: 'http://127.0.0.1:8000/configureAjax?id=42&foreign='+searchVal,\n" +
                                    "        dataType: \"json\",\n" +
                                    "        async: false,\n" +
                                    "        success: function (r) { \n" +
                                    "                                     if(r.length==0){\n" +
                                    "                                           layer.msg(\"不存在该序号\");\n" +
                                    "                                      $('#设备名称').textbox('setValue','');\n" +
                                    "                                          $('#规格').textbox('setValue','');\n" +
                                    "                                          $('#单位').textbox('setValue','');\n" +
                                    "                                          $('#数量').textbox('setValue','');\n" +
                                    "                                          $('#借用原因').textbox('setValue','');\n" +
                                    "                                          $('#借用人').textbox('setValue','');\n" +
                                    "                                          $('#借用日期').textbox('setValue','');\n" +
                                    "                                          $('#归还日期').textbox('setValue','');\n" +
                                    "                                          $('#归还数量').textbox('setValue','');\n" +
                                    "                                          $('#归还人').textbox('setValue','');\n" +
                                    "                                          $('#备注').textbox('setValue','');\n" +
                                    "                                          $('#借用地点').textbox('setValue','');\n" +
                                    "                                          $('#归还地点').textbox('setValue','');\n" +
                                    "                                      }else{ \n" +
                                    "                                      $('#设备名称').textbox('setValue',r[0].equipment_name);\n" +
                                    "                                          $('#规格').textbox('setValue',r[0].equipment_norms);\n" +
                                    "                                          $('#单位').textbox('setValue',r[0].unit);\n" +
                                    "                                          $('#数量').textbox('setValue',r[0].equipment_number);\n" +
                                    "                                          $('#借用原因').textbox('setValue',r[0].borrowing_reason);\n" +
                                    "                                          $('#借用人').textbox('setValue',r[0].borrowing_user);\n" +
                                    "                                          $('#借用日期').textbox('setValue',r[0].borrowing_date);\n" +
                                    "                                          $('#归还日期').textbox('setValue',r[0].return_date);\n" +
                                    "                                          $('#归还数量').textbox('setValue',r[0].return_number);\n" +
                                    "                                          $('#归还人').textbox('setValue',r[0].return_user);\n" +
                                    "                                          $('#备注').textbox('setValue',r[0].remark);\n" +
                                    "                                          $('#借用地点').textbox('setValue',r[0].borrowing_park_in);\n" +
                                    "                                          $('#归还地点').textbox('setValue',r[0].borrowing_park_out);\n" +
                                    "                                     }\n" +
                                    "                                     }\n" +
                                    "                                     });\n" +
                                    "                                     }\n" +
                                    "                                 });";
                            }
                        }
                    } else if (str2.substring(0, 2) == '02') {//数字框
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").numberbox({});';
                    } else if (str2.substring(0, 2) == '03') {//下拉框
                        if ((str1).indexOf("中心库项目") != -1) {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='zxkxm' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            $('#zxkxm').combobox({
                                editable: false,
                                panelHeight: 'auto',
                                panelMaxHeight: 150,
                            });
                        } else if ((str1).indexOf("备件编码") != -1) {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            $('#备件编码').combobox({
                                editable: false,
                                panelHeight: 'auto',
                                panelMaxHeight: 150,
                            });
                        } else if ((str1).indexOf("乐园名称") != -1) {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='park' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            $('#park').combobox(
                                {
                                    disabled: false,
                                    method: 'GET',
                                    url: 'http://127.0.0.1:8000/szPark?parkPinYin=' + cityname,
                                    prompt: '请填入乐园名称',
                                    valueField: 'id',
                                    textField: 'name',
                                    panelHeight: 'auto',
                                    panelMaxHeight: 150,
                                    editable: true,
                                    onHidePanel: function () {
                                        var _options = $(this).combobox('options');
                                        var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                        var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                        var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                        for (var i = 0; i < _data.length; i++) {
                                            if (_data[i][_options.valueField] == _value) {
                                                _b = true;
                                                break;
                                            }
                                        }
                                        if (!_b) {
                                            $(this).combobox('setValue', '');
                                        }
                                    },
                                    onLoadSuccess: function () {
                                        var data = $('#park').combobox('getData');
                                        var tid;
                                        var tname;
                                        if (cityname == 'shenzhen') {
                                            tid = data[1].id;
                                            tname = data[1].name;
                                        } else {
                                            tid = data[0].id;
                                            tname = data[0].name;
                                        }
                                        if (data.length > 0) {
                                            $('#park').combobox('select', tname);
                                        }
                                        if (data.length > 0) {
                                            $('#park').combobox('select', tname);
                                            $('#入库项目').combobox({
                                                disabled: false,
                                                method: 'GET',
                                                url: 'http://127.0.0.1:8000/szAttraction?park_id=' + tid,
                                                prompt: '请先填入乐园名称',
                                                valueField: 'id',
                                                textField: 'name',
                                                panelHeight: 'auto',
                                                panelMaxHeight: 150,
                                                editable: true,
                                                onHidePanel: function () {
                                                    var _options = $(this).combobox('options');
                                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                    for (var i = 0; i < _data.length; i++) {
                                                        if (_data[i][_options.valueField] == _value) {
                                                            _b = true;
                                                            break;
                                                        }
                                                    }
                                                    if (!_b) {
                                                        $(this).combobox('setValue', '');
                                                    }
                                                },
                                                onLoadSuccess: function () {
                                                    var val = $(this).combobox("getData");
                                                    for (var item in val[0]) {
                                                        if (item == "id") {
                                                            $(this).combobox("select", val[0][item]);
                                                        }
                                                    }


                                                    $('#备件编码').combobox({
                                                        mode: 'remote',
                                                        async: true,
                                                        disabled: false,
                                                        method: 'GET',
                                                        // url: 'http://127.0.0.1:8000/materialBasic?project_id=' + val[0].same_id,
                                                        url: 'http://127.0.0.1:8000/materialBasic',
                                                        valueField: 'id',
                                                        textField: 'id',
                                                        editable: true,
                                                        onBeforeLoad: function (param) {
                                                            // if(row){
                                                            //     $(this).combobox("setValue", row.备件编码);
                                                            // }
                                                            if (param == null || param.q == null
                                                                || param.q.replace(/ /g, '') == '') {
                                                                var value = $(this).combobox('getValue');
                                                                if (value) {// 修改的时候才会出现q为空而value不为空
                                                                    param.goodName = value;
                                                                    return true;
                                                                }
                                                                return false;
                                                            }
                                                        },
                                                        onSelect: function (rec) {
                                                            $('#备件名称').textbox('setValue', rec.text);
                                                            $('#备件规格').textbox('setValue', rec.spec);
                                                        },
                                                        panelHeight: 'auto',
                                                        panelMaxHeight: 150,
                                                    }).combobox("clear");
                                                    if(goodCode != null && goodCode != '' && typeof goodCode != 'undefined'){
                                                        $('#备件编码').combobox('setValue', goodCode);
                                                        $('#备件名称').textbox('setValue', goodName);
                                                        $('#备件规格').textbox('setValue', goodType);
                                                        goodCode = '';
                                                        goodName = '';
                                                        goodType = '';
                                                        if(leyuan != null && leyuan != '' && typeof leyuan != 'undefined'){
                                                            $('#入库项目').textbox('setValue', leyuan);
                                                        }
                                                    }
                                                },
                                                // onSelect: function (record) {
                                                //     var same_id = record.same_id;
                                                //     $('#备件编码').combobox({
                                                //         mode: 'remote',
                                                //         async: true,
                                                //         disabled: false,
                                                //         method: 'GET',
                                                //         url: 'http://127.0.0.1:8000/materialBasic?project_id=' + same_id,
                                                //         valueField: 'id',
                                                //         textField: 'id',
                                                //         editable: true,
                                                //         onBeforeLoad: function (param) {
                                                //             if (param == null || param.q == null
                                                //                 || param.q.replace(/ /g, '') == '') {
                                                //                 var value = $(this).combobox('getValue');
                                                //                 if (value) {// 修改的时候才会出现q为空而value不为空
                                                //                     param.goodName = value;
                                                //                     return true;
                                                //                 }
                                                //                 return false;
                                                //             }
                                                //         },
                                                //         onSelect: function (rec) {
                                                //             $('#备件名称').textbox('setValue', rec.text);
                                                //             $('#备件规格').textbox('setValue', rec.spec);
                                                //         },
                                                //         panelHeight: 'auto',
                                                //         panelMaxHeight: 150,
                                                //     }).combobox("clear");
                                                // }
                                            }).combobox("clear");

                                            $('#使用项目').combobox({
                                                disabled: false,
                                                method: 'GET',
                                                url: 'http://127.0.0.1:8000/szAttraction?park_id=' + tid,
                                                prompt: '请先填入乐园名称',
                                                valueField: 'id',
                                                textField: 'name',
                                                panelHeight: 'auto',
                                                panelMaxHeight: 150,
                                                editable: true,
                                                onHidePanel: function () {
                                                    var _options = $(this).combobox('options');
                                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                    for (var i = 0; i < _data.length; i++) {
                                                        if (_data[i][_options.valueField] == _value) {
                                                            _b = true;
                                                            break;
                                                        }
                                                    }
                                                    if (!_b) {
                                                        $(this).combobox('setValue', '');
                                                    }
                                                },
                                                onLoadSuccess: function () {
                                                    var val = $(this).combobox("getData");
                                                    if (val.length > 0) {
                                                        for (var item in val[0]) {
                                                            if (item == "id") {
                                                                $(this).combobox("select", val[0][item]);
                                                            }
                                                        }
                                                    }
                                                }
                                            }).combobox("clear");
                                        }
                                    },
                                    onSelect: function (record) {
                                        var id = record.id;
                                        $('#入库项目').combobox({
                                            disabled: false,
                                            method: 'GET',
                                            url: 'http://127.0.0.1:8000/szAttraction?park_id=' + id,
                                            prompt: '请先填入乐园名称',
                                            valueField: 'id',
                                            textField: 'name',
                                            panelHeight: 'auto',
                                            panelMaxHeight: 150,
                                            editable: true,
                                            onHidePanel: function () {
                                                var _options = $(this).combobox('options');
                                                var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                for (var i = 0; i < _data.length; i++) {
                                                    if (_data[i][_options.valueField] == _value) {
                                                        _b = true;
                                                        break;
                                                    }
                                                }
                                                if (!_b) {
                                                    $(this).combobox('setValue', '');
                                                }
                                            },
                                            onSelect: function (record) {
                                                var same_id = record.same_id;
                                                $('#备件编码').combobox({
                                                    mode: 'remote',
                                                    async: true,
                                                    disabled: false,
                                                    method: 'GET',
                                                    url: 'http://127.0.0.1:8000/materialBasic?project_id=' + same_id,
                                                    valueField: 'id',
                                                    textField: 'id',
                                                    editable: true,
                                                    onBeforeLoad: function (param) {
                                                        if (param == null || param.q == null
                                                            || param.q.replace(/ /g, '') == '') {
                                                            var value = $(this).combobox('getValue');
                                                            if (value) {// 修改的时候才会出现q为空而value不为空
                                                                param.goodName = value;
                                                                return true;
                                                            }
                                                            return false;
                                                        }
                                                    },
                                                    onSelect: function (rec) {
                                                        $('#备件名称').textbox('setValue', rec.text);
                                                        $('#备件规格').textbox('setValue', rec.spec);
                                                    },
                                                    panelHeight: 'auto',
                                                    panelMaxHeight: 150,
                                                }).combobox("clear");
                                            }
                                        }).combobox("clear");

                                        $('#使用项目').combobox({
                                            disabled: false,
                                            method: 'GET',
                                            url: 'http://127.0.0.1:8000/szAttraction?park_id=' + id,
                                            prompt: '请先填入乐园名称',
                                            valueField: 'id',
                                            textField: 'name',
                                            panelHeight: 'auto',
                                            panelMaxHeight: 150,
                                            editable: true,
                                            onHidePanel: function () {
                                                var _options = $(this).combobox('options');
                                                var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                for (var i = 0; i < _data.length; i++) {
                                                    if (_data[i][_options.valueField] == _value) {
                                                        _b = true;
                                                        break;
                                                    }
                                                }
                                                if (!_b) {
                                                    $(this).combobox('setValue', '');
                                                }
                                            },
                                            onLoadSuccess: function () {
                                                var val = $(this).combobox("getData");
                                                if (val.length > 0) {
                                                    for (var item in val[0]) {
                                                        if (item == "id") {
                                                            $(this).combobox("select", val[0][item]);
                                                        }
                                                    }
                                                } else {
                                                    $('#备件名称').textbox('setValue', '');
                                                    $('#备件规格').textbox('setValue', '');
                                                }
                                            }
                                        }).combobox("clear");
                                    }
                                });
                        } else if ((str1).indexOf("中心库") != -1) {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='zxk' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            $('#zxk').combobox(
                                {
                                    disabled: false,
                                    method: 'GET',
                                    url: 'http://127.0.0.1:8000/szPark?parkPinYin=zhongxinku',
                                    prompt: '请填入乐园名称',
                                    valueField: 'id',
                                    textField: 'name',
                                    panelHeight: 'auto',
                                    panelMaxHeight: 150,
                                    editable: true,
                                    onHidePanel: function () {
                                        var _options = $(this).combobox('options');
                                        var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                        var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                        var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                        for (var i = 0; i < _data.length; i++) {
                                            if (_data[i][_options.valueField] == _value) {
                                                _b = true;
                                                break;
                                            }
                                        }
                                        if (!_b) {
                                            $(this).combobox('setValue', '');
                                        }
                                    },
                                    onLoadSuccess: function () {
                                        var data = $('#zxk').combobox('getData');
                                        if (data.length > 0) {
                                            $('#zxk').combobox('select', data[0].name);
                                            $('#zxkxm').combobox({
                                                disabled: false,
                                                method: 'GET',
                                                url: 'http://127.0.0.1:8000/szAttraction?park_id=' + data[0].id,
                                                prompt: '请先填入乐园名称',
                                                valueField: 'id',
                                                textField: 'name',
                                                panelHeight: 'auto',
                                                panelMaxHeight: 150,
                                                editable: true,
                                                onHidePanel: function () {
                                                    var _options = $(this).combobox('options');
                                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                    for (var i = 0; i < _data.length; i++) {
                                                        if (_data[i][_options.valueField] == _value) {
                                                            _b = true;
                                                            break;
                                                        }
                                                    }
                                                    if (!_b) {
                                                        $(this).combobox('setValue', '');
                                                    }
                                                },
                                                onLoadSuccess: function () {
                                                    var val = $(this).combobox("getData");
                                                    for (var item in val[0]) {
                                                        if (item == "id") {
                                                            $(this).combobox("select", val[0][item]);
                                                        }
                                                    }
                                                    $('#备件编码').combobox({
                                                        mode: 'remote',
                                                        async: true,
                                                        disabled: false,
                                                        method: 'GET',
                                                        url: 'http://127.0.0.1:8000/materialBasic?project_id=' + val[0].same_id,
                                                        valueField: 'id',
                                                        textField: 'id',
                                                        editable: true,
                                                        onBeforeLoad: function (param) {
                                                            if (param == null || param.q == null
                                                                || param.q.replace(/ /g, '') == '') {
                                                                var value = $(this).combobox('getValue');
                                                                if (value) {// 修改的时候才会出现q为空而value不为空
                                                                    param.goodName = value;
                                                                    return true;
                                                                }
                                                                return false;
                                                            }
                                                        },
                                                        onSelect: function (rec) {
                                                            $('#备件名称').textbox('setValue', rec.text);
                                                            $('#备件规格').textbox('setValue', rec.spec);
                                                        },
                                                        panelHeight: 'auto',
                                                        panelMaxHeight: 150,
                                                    }).combobox("clear");
                                                },
                                                onSelect: function (record) {
                                                    var same_id = record.same_id;
                                                    $('#备件编码').combobox({
                                                        mode: 'remote',
                                                        async: true,
                                                        disabled: false,
                                                        method: 'GET',
                                                        url: 'http://127.0.0.1:8000/materialBasic?project_id=' + same_id,
                                                        valueField: 'id',
                                                        textField: 'id',
                                                        editable: true,
                                                        onBeforeLoad: function (param) {
                                                            if (param == null || param.q == null
                                                                || param.q.replace(/ /g, '') == '') {
                                                                var value = $(this).combobox('getValue');
                                                                if (value) {// 修改的时候才会出现q为空而value不为空
                                                                    param.goodName = value;
                                                                    return true;
                                                                }
                                                                return false;
                                                            }
                                                        },
                                                        onSelect: function (rec) {
                                                            $('#备件名称').textbox('setValue', rec.text);
                                                            $('#备件规格').textbox('setValue', rec.spec);
                                                        },
                                                        panelHeight: 'auto',
                                                        panelMaxHeight: 150,
                                                    }).combobox("clear");
                                                }
                                            }).combobox("clear");
                                        }
                                    },
                                    onSelect: function (record) {
                                        var id = record.id;
                                        $('#zxkxm').combobox({
                                            disabled: false,
                                            method: 'GET',
                                            url: 'http://127.0.0.1:8000/szAttraction?park_id=' + id,
                                            prompt: '请先填入乐园名称',
                                            valueField: 'id',
                                            textField: 'name',
                                            panelHeight: 'auto',
                                            panelMaxHeight: 150,
                                            editable: true,
                                            onHidePanel: function () {
                                                var _options = $(this).combobox('options');
                                                var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                                var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                                var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                                for (var i = 0; i < _data.length; i++) {
                                                    if (_data[i][_options.valueField] == _value) {
                                                        _b = true;
                                                        break;
                                                    }
                                                }
                                                if (!_b) {
                                                    $(this).combobox('setValue', '');
                                                }
                                            },
                                            onSelect: function (record) {
                                                var same_id = record.same_id;
                                                $('#备件编码').combobox({
                                                    mode: 'remote',
                                                    async: true,
                                                    disabled: false,
                                                    method: 'GET',
                                                    url: 'http://127.0.0.1:8000/materialBasic?project_id=' + same_id,
                                                    valueField: 'id',
                                                    textField: 'id',
                                                    editable: true,
                                                    onBeforeLoad: function (param) {
                                                        if (param == null || param.q == null
                                                            || param.q.replace(/ /g, '') == '') {
                                                            var value = $(this).combobox('getValue');
                                                            if (value) {// 修改的时候才会出现q为空而value不为空
                                                                param.goodName = value;
                                                                return true;
                                                            }
                                                            return false;
                                                        }
                                                    },
                                                    onSelect: function (rec) {
                                                        $('#备件名称').textbox('setValue', rec.text);
                                                        $('#备件规格').textbox('setValue', rec.spec);
                                                    },
                                                    panelHeight: 'auto',
                                                    panelMaxHeight: 150,
                                                }).combobox("clear");
                                            }
                                        }).combobox("clear");
                                    }
                                });
                        } else if ((str1).indexOf("入库项目") != -1 || (str1).indexOf("使用项目") != -1) {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            $('#入库项目').combobox({
                                editable: false,
                                panelHeight: 'auto',
                                panelMaxHeight: 150,
                            });
                            $('#使用项目').combobox({
                                editable: false,
                                panelHeight: 'auto',
                                panelMaxHeight: 150,
                            });
                        } else {
                            $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                            var name = "#" + str1;
                            var id = str2.substring(2, str2.length);
                            if (id != '') {
                                input += " $('" + name + "').combobox({\n" +
                                    "                                    disabled: false,\n" +
                                    "                                    method: 'GET',\n" +
                                    "                                    url: 'http://127.0.0.1:8000/configureFunc?id= " + id + "',\n" +
                                    "                                    valueField: 'name',\n" +
                                    "                                    textField: 'name',\n" +
                                    "                                    panelHeight: 'auto',\n" +
                                    "                                    panelMaxHeight: 150,\n" +
                                    "                                    editable: true,\n" +
                                    "   onHidePanel: function () {\n" +
                                    "                                    var _options = $(this).combobox('options');\n" +
                                    "                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */\n" +
                                    "                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */\n" +
                                    "                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */\n" +
                                    "                                    for (var i = 0; i < _data.length; i++) {\n" +
                                    "                                        if (_data[i][_options.valueField] == _value) {\n" +
                                    "                                            _b = true;\n" +
                                    "                                            break;\n" +
                                    "                                        }\n" +
                                    "                                    }\n" +
                                    "                                    if (!_b) {\n" +
                                    "                                        $(this).combobox('setValue', '');\n" +
                                    "                                    }\n" +
                                    "                                }," +
                                    "                                    onLoadSuccess: function () {\n" +
                                    "                                        var val = $(this).combobox(\"getData\");\n" +
                                    "                                        for (var item in val[0]) {\n" +
                                    "                                            if (item == \"name\") {\n" +
                                    "                                                $(this).combobox(\"select\", val[0][item]);\n" +
                                    "                                            }\n" +
                                    "                                        }\n" +
                                    "                                    }\n" +
                                    "                                }).combobox(\"clear\");"

                            }
                        }
                    } else if (str2.substring(0, 2) == '04') {//日期框
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").datebox({ width: 165 });';
                    } else if (str2.substring(0, 2) == '05') {//日期时间框
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").datetimebox({ width: 165 });';
                    } else if (str2.substring(0, 2) == '06') {//下拉框（id/name)
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        var id = str2.substring(2, str2.length);
                        if (id != '') {
                            input += "$('" + name + "').combobox({\n" +
                                "                                disabled: false,\n" +
                                "                                method: 'GET',\n" +
                                "                                url: 'http://127.0.0.1:8000/configureFunc?id=" + id + "',\n" +
                                "                                valueField: 'id',\n" +
                                "                                textField: 'name',\n" +
                                "                                panelHeight: 'auto',\n" +
                                "                                panelMaxHeight: 150,\n" +
                                "                                editable: true,\n" +
                                "   onHidePanel: function () {\n" +
                                "                                    var _options = $(this).combobox('options');\n" +
                                "                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */\n" +
                                "                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */\n" +
                                "                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */\n" +
                                "                                    for (var i = 0; i < _data.length; i++) {\n" +
                                "                                        if (_data[i][_options.valueField] == _value) {\n" +
                                "                                            _b = true;\n" +
                                "                                            break;\n" +
                                "                                        }\n" +
                                "                                    }\n" +
                                "                                    if (!_b) {\n" +
                                "                                        $(this).combobox('setValue', '');\n" +
                                "                                    }\n" +
                                "                                }," +
                                "                                onLoadSuccess: function () {\n" +
                                "                                    var val = $(this).combobox(\"getData\");\n" +
                                "                                    for (var item in val[0]) {\n" +
                                "                                        if (item == \"id\") {\n" +
                                "                                            $(this).combobox(\"select\", val[0][item]);\n" +
                                "                                        }\n" +
                                "                                    }\n" +
                                "                                }\n" +
                                "                            }).combobox(\"clear\");\n"
                        }
                    } else if (str2.substring(0, 2) == '07') {//二级下拉框
                        // selectIndex++;
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var id = str2.substring(2, str2.length);
                        var foreign;
                        if (id.substring(0, 1) == '1') {
                            select1 = "#" + str1;//一级下拉框的id
                            selectf1 = id.substring(1, id.length);//一级拉框绑定的表id
                        } else {
                            senselect1 = "#" + str1;//id
                            senselectf1 = id.substring(1, id.length);//表id
                            input = input + " $('" + senselect1 + "').combobox({\n" +
                                "                                editable: false,\n" +
                                "                                panelHeight: 'auto',\n" +
                                "                                panelMaxHeight: 150,\n" +
                                "                            });"
                            input += "$('" + select1 + "').combobox(\n" +
                                "                                {\n" +
                                "                                    disabled: false,\n" +
                                "                                    method: 'GET',\n" +
                                "                                    url: 'http://127.0.0.1:8000/configureFunc?id=" + selectf1 + "',\n" +
                                "                                    valueField: 'name',\n" +
                                "                                    textField: 'name',\n" +
                                "                                    panelHeight: 'auto',\n" +
                                "                                    panelMaxHeight: 150,\n" +
                                "                                    editable: true,\n" +
                                "   onHidePanel: function () {\n" +
                                "                                    var _options = $(this).combobox('options');\n" +
                                "                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */\n" +
                                "                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */\n" +
                                "                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */\n" +
                                "                                    for (var i = 0; i < _data.length; i++) {\n" +
                                "                                        if (_data[i][_options.valueField] == _value) {\n" +
                                "                                            _b = true;\n" +
                                "                                            break;\n" +
                                "                                        }\n" +
                                "                                    }\n" +
                                "                                    if (!_b) {\n" +
                                "                                        $(this).combobox('setValue', '');\n" +
                                "                                    }\n" +
                                "                                }," +
                                "                                    onLoadSuccess: function () {\n" +
                                "                                        var data = $('" + select1 + "').combobox('getData');\n" +
                                "                                        if (data.length > 0) {\n" +
                                "                                            $('" + select1 + "').combobox('select', data[0].name);\n" +
                                "                                        }\n" +
                                "                                    },\n" +
                                "                                    onSelect: function (record) {\n" +
                                "                                        $('" + senselect1 + "').combobox({\n" +
                                "                                            disabled: false,\n" +
                                "                                            method: 'GET',\n" +
                                "                                            url: 'http://127.0.0.1:8000/configureSecond?id=" + senselectf1 + "&foreign='+record.id,\n" +
                                "                                            valueField: 'name',\n" +
                                "                                            textField: 'name',\n" +
                                "                                            panelHeight: 'auto',\n" +
                                "                                            panelMaxHeight: 150,\n" +
                                "                                            editable: true,\n" +
                                "   onHidePanel: function () {\n" +
                                "                                    var _options = $(this).combobox('options');\n" +
                                "                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */\n" +
                                "                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */\n" +
                                "                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */\n" +
                                "                                    for (var i = 0; i < _data.length; i++) {\n" +
                                "                                        if (_data[i][_options.valueField] == _value) {\n" +
                                "                                            _b = true;\n" +
                                "                                            break;\n" +
                                "                                        }\n" +
                                "                                    }\n" +
                                "                                    if (!_b) {\n" +
                                "                                        $(this).combobox('setValue', '');\n" +
                                "                                    }\n" +
                                "                                }," +
                                "                                            onLoadSuccess: function () {\n" +
                                "                                                var val = $(this).combobox(\"getData\");\n" +
                                "                                                for (var item in val[0]) {\n" +
                                "                                                    if (item == \"name\") {\n" +
                                "                                                        $(this).combobox(\"select\", val[0][item]);\n" +
                                "                                                    }\n" +
                                "                                                }\n" +
                                "                                            },\n" +
                                "                                        })\n" +
                                "                                    }\n" +
                                "                                });"
                        }
                    } else if (str2.substring(0, 2) == '08') {//下拉框（name/name)where
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input id='" + str1 + "' style='width:165px'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        var id = str2.substring(2, str2.length);
                        var foreign = null;
                        if (id.substring(0, 1) == '1') {
                            var select1 = id.substring(1, id.length);//username
                            var foreign = username;
                        } else {
                            var select1 = id.substring(1, id.length);//表id
                            var foreign = cityname;
                        }
                        input += "$('" + name + "').combobox({\n" +
                            "                                            disabled: false,\n" +
                            "                                            method: 'GET',\n" +
                            "                                            url: 'http://127.0.0.1:8000/configureSecond?id=" + select1 + "&foreign=" + foreign + "',\n" +
                            "                                            valueField: 'name',\n" +
                            "                                            textField: 'name',\n" +
                            "                                            panelHeight: 'auto',\n" +
                            "                                            panelMaxHeight: 150,\n" +
                            "                                            editable: true,\n" +
                            "   onHidePanel: function () {\n" +
                            "                                    var _options = $(this).combobox('options');\n" +
                            "                                    var _data = $(this).combobox('getData');/* 下拉框所有选项 */\n" +
                            "                                    var _value = $(this).combobox('getValue');/* 用户输入的值 */\n" +
                            "                                    var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */\n" +
                            "                                    for (var i = 0; i < _data.length; i++) {\n" +
                            "                                        if (_data[i][_options.valueField] == _value) {\n" +
                            "                                            _b = true;\n" +
                            "                                            break;\n" +
                            "                                        }\n" +
                            "                                    }\n" +
                            "                                    if (!_b) {\n" +
                            "                                        $(this).combobox('setValue', '');\n" +
                            "                                    }\n" +
                            "                                }," +
                            "                                            onLoadSuccess: function () {\n" +
                            "                                                var val = $(this).combobox(\"getData\");\n" +
                            "                                                for (var item in val[0]) {\n" +
                            "                                                    if (item == \"name\") {\n" +
                            "                                                        $(this).combobox(\"select\", val[0][item]);\n" +
                            "                                                    }\n" +
                            "                                                }\n" +
                            "                                            },\n" +
                            "                                        })\n"
                    } else if (str2.substring(0, 2) == '09') {//文本(只可读)
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").textbox({});';
                        input = input + '$("' + name + '").textbox(\'readonly\');';
                    } else if (str2.substring(0, 2) == '10') {//多行文本
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").textbox({multiline:true,height:"50px"});';
                    } else if (str2.substring(0, 2) == '11') {//浮点数字框
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").numberbox({precision:2});';
                    } else if (str2.substring(0, 2) == '12') {//系统用户中文名
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td><input style='width:165px' id='" + str1 + "' name='" + str1 + "'></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").textbox({});';
                        input = input + '$("' + name + '").textbox("setValue","' + getUserName() + '");';
                        input = input + '$("' + name + '").textbox(\'readonly\');';
                    } else if (str2.substring(0, 2) == '23') {//文本(带button)
                        $('#fm').append("<tr id='" + key + "'><td align='center'>" + str1 + "</td><td align='center'>&nbsp;&nbsp;&nbsp;</td><td id='文件'><button id='uploadfile1' type='button' class='layui-btn layui-btn-primary layui-btn-xs' onclick='upload()'>上传</button></td></tr><tr id='" + key + "tr'><td><br/></td><td><br/></td></tr>");
                        var name = "#" + str1;
                        input = input + '$("' + name + '").textbox({prompt: \'可不填\'});';
                    }
                }
                eval(input + "}");
                temp();

                var length = chosedStrs.length;
                var heigtht = 340;
                if (length > 6) {
                    heigtht += (length - 6) * 40
                    if (heigtht > 650) {
                        heigtht = 650;
                    }
                }

                $('#win').dialog({
                    title: '运行函数',
                    width: 450,
                    height: heigtht,
                    top: 150,
                    closed: false,//显示对话框
                    cache: false,
                    modal: true,
                    closable: false,
                    resizable: true
                });

                $('#win').window('center');//使Dialog居中显示

                if (sqlName == "ownfunc_avc_新增设备安装计划") {
                    $('#公园名称').combobox(
                        {
                            prompt: '可根据拼音进行搜索！',
                            editable: true,
                            onHidePanel: function () {
                                var _options = $(this).combobox('options');
                                var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                for (var i = 0; i < _data.length; i++) {
                                    if (_data[i][_options.valueField] == _value) {
                                        _b = true;
                                        break;
                                    }
                                }
                                if (!_b) {
                                    $(this).combobox('setValue', '');
                                }
                            },
                        })

                    $("#公园名称").combobox("textbox").bind("focus", function () {
                        $("#公园名称").combobox('setText', '');
                    })

                    $('#项目名称').combobox(
                        {
                            prompt: '可根据拼音进行搜索！',
                            editable: true,
                            onHidePanel: function () {
                                var _options = $(this).combobox('options');
                                var _data = $(this).combobox('getData');/* 下拉框所有选项 */
                                var _value = $(this).combobox('getValue');/* 用户输入的值 */
                                var _b = false;/* 标识是否在下拉列表中找到了用户输入的字符 */
                                for (var i = 0; i < _data.length; i++) {
                                    if (_data[i][_options.valueField] == _value) {
                                        _b = true;
                                        break;
                                    }
                                }
                                if (!_b) {
                                    $(this).combobox('setValue', '');
                                }
                            },
                        });

                    $("#项目名称").combobox("textbox").bind("focus", function () {
                        $("#项目名称").combobox('setText', '');
                    })
                }

            } else {

                if (sqlName.indexOf("all_文件管理") != -1) {
                    openFileTypeAllocation()
                }

                sqlStr = "select ";
                $.ajax({
                    type: "post",
                    url: g_url_head + '/configureAll',
                    dataType: 'json',
                    data: {sqlname: sqlName, type: "1"},
                    async: false,
                    success: function (r) {
                        if (r.success == 1) {
                            chosed = r.column;
                            if (chosed.length == 0) {
                                sqlStr += "*";
                            } else {
                                for (let key in chosed) {
                                    sqlStr += chosed[key];
                                    ;
                                    sqlStr += ",";
                                }
                                sqlStr = sqlStr.substr(0, sqlStr.length - 1);
                            }
                        } else {
                            layer.confirm('运行失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('条件查询失败！');
                        } else {
                            layer.alert('网络连接中断！')
                        }
                    }
                });

                sqlStr += " from ";
                sqlStr += sqlName;
                editor.setValue(sqlStr);
                $('#execute').click();
            }
        }
    }

    function remove() {
        // var node = $('#dstable').tree('getSelected');
        var flag = '';
        var node = $(g_tree).tree('getSelected');
        if (g_tree == "#tree1") {
            flag = '常用sql';
        } else {
            flag = '个人应用';
        }
        if (node == null) {
            layer.msg("请先左键选择，再使用右键删除功能！")
        } else {
            var nodeSqlName = node.text;
            layer.confirm('您确定要删除这条「' + nodeSqlName + '」吗？', {
                btn: ['确定', '取消'] //按钮
            }, function () {
                $.ajax({
                    type: "GET",
                    url: g_url_head + '/deleteSql',
                    data: {username: username, nodeSqlName: nodeSqlName, flag: flag},
                    dataType: "json",
                    //async : false,
                    beforeSend: function () {
                        // loading();
                    },
                    success: function (r) {
                        if (r.success) {
                            layer.confirm('「' + nodeSqlName + '」删除成功!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.closeAll(); //疯狂模式，关闭所有层
                                $("#change")[0].reset();
                                layui.form.render();
                                $(g_tree).tree('remove', node.target);
                            });
                        } else {
                            layer.confirm('「' + nodeSqlName + '」删除失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                                $("#change")[0].reset();
                                layui.form.render();
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('常用sql删除失败！');
                        }
                    }
                });
            });
            // } else {
            //     $(tree).tree('remove', node.target);
            // }
        }
    }

    // function collapse() {
    //     var node = $('#dstable').tree('getSelected');
    //     $('#dstable').tree('collapse', node.target);
    // }
    //
    // function expand() {
    //     var node = $('#dstable').tree('getSelected');
    //     $('#dstable').tree('expand', node.target);
    // }

    function submitForm(flag) {
        if (flag == 1) {
            sqlStr = "select " + sqlName + "("
            for (let key in chosed) {
                var text = chosed[key];
                var index = text.lastIndexOf("-")
                var str1 = text.substring(0, index);
                var str2 = text.substring(index + 1, text.length);
                var name = "#" + str1;

                if ((str2.substring(0, 2) == '01') || (str2.substring(0, 2) == '09') || (str2.substring(0, 2) == '10') || (str2.substring(0, 2) == '12')) {
                    sqlStr += "'" + $(name).textbox('getValue') + "',";
                } else if (str2.substring(0, 2) == '02' || str2.substring(0, 2) == '11') {
                    sqlStr += "'" + $(name).numberbox('getValue') + "',";
                } else if (str2.substring(0, 2) == '03') {
                    if (str1 == '乐园名称') {
                        sqlStr += "'" + $("#park").combobox('getText') + "',"
                    } else if (str1 == '乐园项目') {
                        sqlStr += "'" + $("#project").combobox('getText') + "',"
                    } else if (str1 == '入库项目') {
                        sqlStr += "'" + $("#入库项目").combobox('getText') + "',"
                    } else if (str1 == '使用项目') {
                        sqlStr += "'" + $("#使用项目").combobox('getText') + "',"
                    } else if (str1 == '中心库项目') {
                        sqlStr += "'" + $("#zxkxm").combobox('getText') + "',"
                    } else if (str1 == '中心库') {
                        sqlStr += "'" + $("#zxk").combobox('getText') + "',"
                    } else {
                        sqlStr += "'" + $(name).combobox('getValue') + "',"
                    }
                } else if ((str2.substring(0, 2) == '03') || (str2.substring(0, 2) == '06') || (str2.substring(0, 2) == '07') || (str2.substring(0, 2) == '08')) {
                    sqlStr += "'" + $(name).combobox('getValue') + "',"
                } else if (str2.substring(0, 2) == '04') {
                    sqlStr += "'" + $(name).datebox('getValue') + "',";
                } else if (str2.substring(0, 2) == '05') {
                    sqlStr += "'" + $(name).datetimebox('getValue') + "',";
                }
            }
            sqlStr = sqlStr.substr(0, sqlStr.length - 1);
            sqlStr += ")"
            editor.setValue(sqlStr);
            $('#execute').click();
            closeWin();
        } else if (flag == 2) {
            closeWin();
        }
    }

    function chaxun1() {
        showsql(2);
        var opt = {};
        var temp = [];
        if (!(sqlName.indexOf("ownfunc_") != -1) && !(sqlName.indexOf("function_") != -1) && !(sqlName.indexOf("multiline") != -1)) {
            if (g_nodeParent.text == '常用sql') {
                var exeSql = g_node.sql;
                var sqlname = getSqlTableName(exeSql);
                $.ajax({
                    type: "post",
                    url: g_url_head + '/configureAll',
                    dataType: 'json',
                    // data: {sqlname: g_node.text, type: "1"},
                    data: {sqlname: sqlname, type: "1"},
                    async: false,
                    success: function (r) {
                        if (r.success == 1) {
                            chosed = r.column;
                            for (let key in chosed) {
                                opt.id = key;
                                opt.name = chosed[key];
                                temp[key] = opt;
                                opt = {};
                            }
                            $('#chaxunwin').dialog({
                                queryParams: {sqlname: sqlname}
                            });
                        } else {
                            layer.confirm('条件查询失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('条件查询失败！');
                        } else {
                            layer.alert('网络连接中断！')
                        }
                    }
                });
            }
            // else if (g_nodeGrandParent.text == '个人应用') {
            //     if (chosed.length == 0 || "undefined" == typeof chosed.length) { //我的应用下的函数
            //         var nodes = $("#dstable").tree("findNodes", function (node) {
            //             return $.string.contains(node.text, sqlName);
            //         });
            //         var node = nodes[nodes.length - 1];
            //         chosed = node.children;
            //     }
            //     for (let key in chosed) {
            //         opt.id = key;
            //         opt.name = chosed[key].text;
            //         temp[key] = opt;
            //         opt = {};
            //     }
            //     console.log(temp);
            // }
            else {
                $.ajax({
                    type: "post",
                    url: g_url_head + '/configureAll',
                    dataType: 'json',
                    data: {sqlname: g_node.text, type: "1"},
                    async: false,
                    success: function (r) {
                        if (r.success == 1) {
                            chosed = r.column;
                            for (let key in chosed) {
                                opt.id = key;
                                opt.name = chosed[key];
                                temp[key] = opt;
                                opt = {};
                            }
                            $('#chaxunwin').dialog({
                                queryParams: {sqlname: sqlname}
                            });
                        } else {
                            layer.confirm('条件查询失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('条件查询失败！');
                        } else {
                            layer.alert('网络连接中断！')
                        }
                    }
                });
            }
            // else {
            //     for (let key in chosed) {
            //         opt.id = key;
            //         opt.name = chosed[key].text;
            //         temp[key] = opt;
            //         opt = {};
            //     }
            // }

            $('#chaxunwin').dialog({
                title: '条件查询',
                width: 350,
                height: 270,
                top: 150,
                closed: false,//显示对话框
                cache: false,
                modal: true,
                closable: false,
                resizable: true
            });

            if (count == 0) {
                $('#chaxunconfirm').linkbutton('disable');
            } else {
                $('#chaxunconfirm').linkbutton('enable');
            }

            $('#con').textbox({});

            $('#zd').combobox({
                disabled: false,
                data: temp,
                prompt: '请选择字段名称',
                valueField: 'id',
                textField: 'name',
                panelHeight: 'auto',
                panelMaxHeight: 150,
                editable: false,
            });

            $('#con').combobox({
                disabled: false,
                valueField: 'id',
                textField: 'name',
                panelHeight: 'auto',
                panelMaxHeight: 150,
                editable: false,
                onSelect: function (record) {
                    var condition = record.id;
                    if (condition == 'BETWEEN AND') {
                        $("#sxx").empty();
                        $('#sxx').append("<input type=\"text\" id=\"sx\" name=\"sx\" style=\"width:100px;\"/><input type=\"text\" id=\"sx2\" name=\"sx\" style=\"width:100px;\"/>");
                        $('#sx').textbox({});
                        $('#sx2').textbox({});
                    } else if ((condition == 'ORDER BY ASC') || (condition == 'ORDER BY DESC')) {
                        $("#sxx").empty();
                        $('#sxx').append("<p>请选择字段</p>");
                        $('#sx').textbox({});
                    } else {
                        $("#sxx").empty();
                        $('#sxx').append("<input type=\"text\" id=\"sx\" name=\"sx\" style=\"width:200px;\"/>");
                        $('#sx').textbox({});
                    }
                }
            });
        } else {
            layer.msg('该功能只针对视图！');
            return false;
        }
    }

    function treeSet() {
        // var node = $('#dstable').tree('getSelected');
        var node = $(g_tree).tree('getSelected');
        if (node == null) {
            layer.msg("请先左键选择，再使用设为登录首选功能！")
        } else {
            // var nodeParent = $(g_tree).tree("getParent", node.target);
            // var nodeGrandParent = $(g_tree).tree("getParent", nodeParent.target);
            var nodeSqlName = node.text;
            // if ((nodeParent.text == '常用sql') || ((nodeGrandParent.text == '个人应用') && (nodeSqlName.indexOf("ownfunc_") == -1)) || (nodeParent.text == '视图')) {
            if ((g_tree == '#tree1') || ((g_tree == '#tree2') && (nodeSqlName.indexOf("ownfunc_") == -1))
                ||
                (g_tree == '#tree3')) {
                var url;
                var data = {};
                var sql = (node.sql == null ? '1' : node.sql);
                var sqlValue = nodeSqlName + ";" + username + ";" + sql;
                if (viewname_index == null || typeof viewname_index == 'undefined') {
                    url = "http://127.0.0.1:8000/configureSave";
                    data = {id: 36, sqlValue: sqlValue};
                } else {
                    url = "http://127.0.0.1:8000/configureUpdate";
                    data = {
                        tableName: "sys_index",
                        anyFieldValue: "viewname = '" + nodeSqlName + "'" + "," + "sql = '" + sql + "'",
                        foreignName: "username",
                        foreignValue: username
                    }
                }
                layer.confirm('您确定要将这条「' + nodeSqlName + '」设为登录首选吗？', {
                    btn: ['确定', '取消', '清空首选项'] //按钮
                    , btn3: function (index, layero) {
                        $.ajax({
                            type: "post",
                            url: "http://127.0.0.1:8000/configureDelete",
                            dataType: 'json',
                            data: {
                                tableName: "sys_index",
                                foreignName: "username",
                                foreignValue: username
                            },
                            success: function (data) {
                                if (data.success == 1) {
                                    layer.msg("清空成功");
                                } else {
                                    layer.msg("清空失败");
                                }
                            }
                        })
                    }
                }, function () {
                    $.ajax({
                        type: "post",
                        url: url,
                        dataType: 'json',
                        data: data,
                        success: function (data) {
                            if (data.success == 1) {
                                layer.msg("保存成功,刷新或重新登录即可！");
                            } else {
                                layer.msg("保存失败");
                            }
                        }
                    })
                });
            } else {
                layer.msg("请选择常用sql、个人应用或视图作为登录首选");
            }
        }
    }

    //新建个人应用 节点
    function createAppTree() {
        layer.open({
            type: 1,
            title: '新增个人应用'
            , area: ['500px', '160px']
            , content: $('#app_div')
            , btn: ['保存', '取消']
            , yes: function (index, layero) {
                var appname = $('#app_div input[name="appname"]').val();
                if ($.trim(appname) === "") {
                    layer.msg("应用名称不能为空");
                    return false;
                }
                var sqlValue1 = username + ";" + appname + ";" + 1 + ";" + 'id';
                $.ajax({
                    type: "GET",
                    url: g_url_head + '/configureIdSave',
                    data: {id: 27, sqlValue: sqlValue1},
                    dataType: "json",
                    //async : false,
                    beforeSend: function () {
                        // loading();
                    },
                    success: function (r) {
                        if (r.success) {
                            layer.msg("保存成功");
                            layer.closeAll();
                            $('#app_div input[name="appname"]').val("");
                            $("#tree2").tree("reload");
                        } else {
                            layer.msg("保存失败");
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('保存失败！');
                        }
                    }
                });
            }
        });
    }

    function designView() {
        // var node = $('#dstable').tree('getSelected');
        var node = $(g_tree).tree('getSelected');
        if (node == null) {
            layer.msg("请先左键选择，再使用设计视图功能！")
        } else {
            // var nodeParent = $('#dstable').tree("getParent", node.target);
            // var nodeGrandParent = $('#dstable').tree("getParent", nodeParent.target);
            var nodeSqlName = node.text;
            if ((g_tree == '#tree1') || ((g_tree == '#tree2') && (nodeSqlName.indexOf("ownfunc_") == -1))
                ||
                (g_tree == '#tree3')) {
                var sql = "SELECT * FROM pg_public_view WHERE 记录id = '" + node.text + "'";
                editor.setValue(sql);
                $("#execute").click();
            } else {
                layer.msg("请选择常用sql、个人应用或视图来设计视图");
            }
        }
    }

    function submitForm1() {
        count++;
        // var sqlname = $('#chaxunwin').panel("options").queryParams;
        var obj = $('#chaxunwin').dialog('options');
        var queryParams = obj["queryParams"];
        var sqlname = queryParams["sqlname"];
        if (sqlname != null || typeof sqlname != 'undefined') {
            sqlName = sqlname.toString();
        }
        var s = $("#con").combobox('getText');
        var fs = $("input[name='fs']:checked").val();
        if (count == '1') {
            if (s == "LIKE") {
                sqlStr = "select * FROM " + sqlName + " WHERE ";
                sqlStr += $("#zd").combobox('getText') + " " + s + " '%" + $("#sx").combobox('getText') + "%'";
            } else if (s == "BETWEEN AND") {
                sqlStr = "select * FROM " + sqlName + " WHERE ";
                sqlStr += $("#zd").combobox('getText') + " BETWEEN '" + $("#sx").combobox('getText') + "' AND '" + $("#sx2").combobox('getText') + "'";
            } else if (s == "ORDER BY DESC") {
                sqlStr = "select * FROM " + sqlName + " ";
                sqlStr += " ORDER BY " + $("#zd").combobox('getText') + " DESC";
            } else if (s == "ORDER BY ASC") {
                sqlStr = "select * FROM " + sqlName + " ";
                sqlStr += " ORDER BY " + $("#zd").combobox('getText') + " ASC";
            } else {
                sqlStr = "select * FROM " + sqlName + " WHERE ";
                sqlStr += $("#zd").combobox('getText') + " " + s + " '" + $("#sx").combobox('getText') + "'";
            }
        } else {
            if (s == "LIKE") {
                sqlStr += " " + fs + " " + $("#zd").combobox('getText') + " " + s + " '%" + $("#sx").combobox('getText') + "%'";
            } else if (s == "BETWEEN AND") {
                sqlStr += " " + fs + " " + $("#zd").combobox('getText') + " BETWEEN '" + $("#sx").combobox('getText') + "' AND '" + $("#sx2").combobox('getText') + "'";
            } else if (s == "ORDER BY DESC") {
                sqlStr += " ORDER BY " + $("#zd").combobox('getText') + " DESC";
            } else if (s == "ORDER BY ASC") {
                sqlStr += " ORDER BY " + $("#zd").combobox('getText') + " ASC";
            } else {
                sqlStr += " " + fs + " " + $("#zd").combobox('getText') + " " + s + " '" + $("#sx").combobox('getText') + "'";
            }
        }
        editor.setValue(sqlStr);
        $('#chaxunconfirm').linkbutton('enable');
    }

    function submitForm2() {
        var allSql = editor.getValue();
        if ($.trim(allSql) === "") {
            layer.msg('先执行添加按钮!');
            return false;
        } else if (count == 0) {
            $('#chaxunconfirm').linkbutton('disable');
        } else {
            $('#execute').click();
        }
        closechaxunWin2();
    }

    function closeWin() {
        javascript: $('#win').dialog('close')
        var TemO = document.getElementById("fm");
        for (let key in chosed) {
            id = '" + key + "tr'
            var newInput = document.getElementById(key);
            TemO.removeChild(newInput);
            key += "tr";
            var newInputtr = document.getElementById(key);
            TemO.removeChild(newInputtr);
        }
        $("#fm").empty();
        input = 'temp = function(){';
    }

    function closechaxunWin() {
        javascript: $('#chaxunwin').dialog('close');
        editor.setValue("");
        count = 0;
    }

    function closechaxunWin2() {
        javascript: $('#chaxunwin').dialog('close');
        count = 0;
    }

    function showsql(flag) {
        var image = document.getElementById("showsqlimage");
        var path = image.getAttribute('src');
        if (flag == 1) {
            if (path == 'image/showsql.png') {
                editor.setSize('height', '100px');
                image.setAttribute("src", "image/hiddensql.png");
            } else {
                editor.setSize('height', '0px');
                image.setAttribute("src", "image/showsql.png");
            }
        } else if (flag == 2) {
            if (path == 'image/showsql.png') {
                editor.setSize('height', '100px');
            } else {
                editor.setSize('height', '100px');
            }
        }
    }

    // Ajax 文件下载
    $.download = function (url, data) {    // 获得url和data
        var inputs = '';
        $.each(data, function (name, value) {
            inputs += '<input type="hidden" name="' + name + '" value="' + value + '" />';
        });
        $('<form action="' + url + '" method="post">' + inputs + '</form>')
            .appendTo('body').submit().remove();
    };

    //下载模板
    function downLoadExcelTemplate() {
        var exeSql = editor.getValue();
        if (exeSql == null || exeSql == "") {
            layer.msg("无执行SQL语句");
        } else {
            var options = $("#sqldata").datagrid("getPager").data("pagination").options;
            var curr = options.pageNumber;
            var size = options.pageSize;
            var formData = {
                "role": role,
                "sql": exeSql,
                "page": -1,
                "rows": size,
            };
            // 下载文件
            $.download('http://127.0.0.1:8000/downLoadExcel', formData);
        }
    };

    // function noticePublish() {
    //     layer.open({
    //         type: 1,
    //         title: '公告发布'
    //         , area: ['500px', '330px']
    //         , content: $('#changenotice_div')
    //         , btn: ['保存', '取消']
    //         , yes: function (index, layero) {
    //             var viewname = $('#changenotice_div input[name="viewname"]').val();
    //             var notice = $('#changenotice_div textarea[name="notice"]').val();
    //             if ($.trim(viewname) === "" || $.trim(notice) === "") {
    //                 layer.msg("视图名称和公告不能为空");
    //                 return false;
    //             }
    //             var sqlValue = viewname + ";" + notice;
    //             $.ajax({
    //                 type: "post",
    //                 url: 'http://127.0.0.1:8000/configureSave',
    //                 dataType: 'json',
    //                 data: {id: 29, sqlValue: sqlValue},
    //                 success: function (r) {
    //                     if (r.success == 1) {
    //                         layer.confirm('保存成功!', {
    //                             closeBtn: 0,//不显示关闭按钮
    //                             btn: ['确认'] //按钮
    //                         }, function () {
    //                             layer.closeAll(); //疯狂模式，关闭所有层
    //                             $("#changenotice")[0].reset();
    //                             layui.form.render();
    //                         });
    //                     } else {
    //                         layer.confirm('保存失败!', {
    //                             closeBtn: 0,//不显示关闭按钮
    //                             btn: ['确认'] //按钮
    //                         }, function () {
    //                             layer.close(layer.index);
    //                         });
    //                     }
    //                 },
    //                 error: function (r) {
    //                     if (r.success == '0') {
    //                         layer.alert('密码修改失败！');
    //                     }
    //                 }
    //             });
    //         }
    //         , bt2: function (index, layero) {
    //             //return false 开启该代码可禁止点击该按钮关闭
    //         }
    //     });
    // }

    function changeuser() {
        layer.open({
            type: 1,
            title: '用户密码修改'
            , area: ['500px', '230px']
            , content: $('#changeuser_div')
            , btn: ['保存', '取消']
            , yes: function (index, layero) {
                var oldpassword = $('#changeuser_div input[name="oldpassword"]').val();
                var newpassword = $('#changeuser_div input[name="newpassword"]').val();
                if ($.trim(oldpassword) === "" || $.trim(newpassword) === "") {
                    layer.msg("新旧密码不能为空");
                    return false;
                }
                $.ajax({
                    type: "GET",
                    url: 'http://127.0.0.1:8000/changeUser',
                    data: {username: username, oldpassword: oldpassword, newpassword: newpassword},
                    dataType: "json",
                    //async : false,
                    beforeSend: function () {
                        // loading();
                    },
                    success: function (r) {
                        if (r.success) {
                            layer.confirm('密码修改成功!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.closeAll(); //疯狂模式，关闭所有层
                                $("#change")[0].reset();
                                layui.form.render();
                            });
                        } else {
                            layer.confirm('密码修改失败!', {
                                closeBtn: 0,//不显示关闭按钮
                                btn: ['确认'] //按钮
                            }, function () {
                                layer.close(layer.index);
                                $("#change")[0].reset();
                                layui.form.render();
                            });
                        }
                    },
                    error: function (r) {
                        if (r.success == '0') {
                            layer.alert('密码修改失败！');
                        }
                    }
                });
            }
            , bt2: function (index, layero) {
                //return false 开启该代码可禁止点击该按钮关闭
            }
        });
    }

    function openuploadfile() {
        $("#uploadfilediv").dialog("open").dialog("setTitle", "文件上传(100M以内)");
    }

    var g_fileID = null;
    var g_deptname = null;

    function common(dept, fileID, flag, detailID) {
        g_fileID = null;
        g_fileID = fileID;
        g_deptname = dept;
        if (deptname != g_deptname) {
            layer.msg("你不属于该部门下，无权标签！");
        } else if (g_deptname == '1' || g_deptname == '2') {
            if (flag == 1) {
                $('#fileAllocation').dialog({
                    title: "新增",
                    queryParams: {detailID: detailID}
                }).dialog('open');
            } else if (flag == 2) {
                $('#fileAllocation').dialog({
                    title: "修改",
                    queryParams: {detailID: detailID}
                }).dialog('open');
            }
        } else if (g_deptname == '3') {
            if (flag == 1) {
                $('#fileAllocationZgb').dialog({
                    title: "新增",
                    queryParams: {detailID: detailID}
                }).dialog('open');
            } else if (flag == 2) {
                $('#fileAllocationZgb').dialog({
                    title: "修改",
                    queryParams: {detailID: detailID}
                }).dialog('open');
            }
        }
    }

    function openAssignFile(dept, fileID, detailID, flag) {
        if (flag == 1) {
            common(dept, fileID, flag, detailID);
        } else if (flag == 2) {
            if (detailID != '' && detailID != 'undefined') {
                common(dept, fileID, flag, detailID);
            } else {
                layer.msg("请先分配标签！");
            }
        }
    }

    // var faultCount = 0;
    // var faultTemp;
    <!-- toolbar function -->
    function searchFault() {
        var sql = '';
        var type_temp = '';
        switch (sqlName) {
            case 'log_operation_report':
                sql = 'select 公园名称,项目名称,日期,设备类型,网络地址,运行次数,故障次数,软件开启次数,故障表名 from ' + sqlName;
                type_temp = '设备类型';
                break;
            case 'log_projector_report':
                sql = 'select 公园名称,项目名称,日期,网络地址,品牌,灯泡使用时长,灯泡使用时间,开机次数,故障次数,故障表名 from ' + sqlName;
                type_temp = '品牌';
                break;
        }
        // if (faultCount == 0) {
        //     faultTemp = sql;
        // } else {
        //     sql = faultTemp;
        // }
        var s_park = $("#s_park").combobox('getText');
        var s_project = $("#s_project").combobox('getText');
        var s_type = $("#s_type").combobox('getText');
        var startDate = $('#s_startDate').datebox('getValue');
        var endDate = $('#s_endDate').datebox('getValue');
        if (s_park != '') {
            s_park = " AND 公园名称 = '" + s_park + "'";
        } else {
            layer.msg('请至少输入公园名称进行查询！');
            return;
        }
        if (s_project != '') {
            s_project = " AND 项目名称 = '" + s_project + "'";
        }
        if (s_type != '') {
            s_type = " AND " + type_temp + " LIKE '%" + s_type + "%'";
        }
        var sqlCon = s_park + s_project + s_type;
        sqlCon = sqlCon.substr(5, sqlCon.length);

        if ((startDate == '') && (endDate == '')) {
            sql += " WHERE " + sqlCon;
        } else if ((startDate == '')) {
            layer.msg('请准确输入运行开始/结束时间');
            return;
        } else if ((startDate != '') && (endDate == '')) {
            sql += " WHERE " + sqlCon + " AND 日期 = '" + startDate + "'";
        } else if (startDate > endDate) {
            layer.msg('警告：结束时间不能早于开始时间!');
            return;
        } else if (startDate == endDate) {
            sql += " WHERE " + sqlCon + " AND 日期 = '" + startDate + "'";
        } else {
            sql += " WHERE " + sqlCon + " AND 日期 BETWEEN '" + startDate + "' AND '" + endDate + "'";
        }
        editor.setValue(sql);
        g_page = 1;
        datagrid_refresh(editor.getValue());
        // faultCount++;
    }

    function resetFault() {
        $("#s_type").combo('setText', '');
        $("#s_type").combo('setValue', '');
        $("#s_startDate").combo('setText', '');
        $("#s_startDate").combo('setValue', '');
        $("#s_endDate").combo('setText', '');
        $("#s_endDate").combo('setValue', '');
        searchFault();
    }


</script>

<!-- reportData datagrid -->
<script src="js/myjs/usermenu.js"></script>
<script src="js/report.js"></script>
<script src="js/reportProjector.js"></script>
<!-- 创建视图 -->
<script src="js/createView.js"></script>
<!-- 质量记录 -->
<script src="js/qr.js"></script>
<!-- 机电质量记录 -->
<script src="js/qrjd.js"></script>
</html>